<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://rwth-pads.github.io/ocelescope/plugins/tutorial/ rel=canonical><link href=../extension/ rel=prev><link href=../../references/core/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.2"><title>Tutorial: OCEL Graph - Ocelescope</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#tutorial-ocel-graph class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=Ocelescope class="md-header__button md-logo" aria-label=Ocelescope data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m21.9 8.9-1.7 1-4-6.9 1.7-1zm-12.1-1 3 5.2 6.1-3.5-3-5.2zm1.6 4.8-2-3.5-4.3 2.5 2 3.5zm-9.3 1.9 1 1.7 2.6-1.5-1-1.7zm10-.6-.3-.4-4.3 2.5.3.4c.2.3.5.6.8.8L7 22h2l1.4-4.3h.1L12 22h2l-1.9-5.6c.5-.7.5-1.6 0-2.4"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Ocelescope </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Tutorial: OCEL Graph </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/rwth-pads/ocelescope title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Ocelescope </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../evaluation/plugin/ class=md-tabs__link> Evaluation </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Plugin Development </a> </li> <li class=md-tabs__item> <a href=../../references/core/ class=md-tabs__link> References </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Ocelescope class="md-nav__button md-logo" aria-label=Ocelescope data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m21.9 8.9-1.7 1-4-6.9 1.7-1zm-12.1-1 3 5.2 6.1-3.5-3-5.2zm1.6 4.8-2-3.5-4.3 2.5 2 3.5zm-9.3 1.9 1 1.7 2.6-1.5-1-1.7zm10-.6-.3-.4-4.3 2.5.3.4c.2.3.5.6.8.8L7 22h2l1.4-4.3h.1L12 22h2l-1.9-5.6c.5-.7.5-1.6 0-2.4"/></svg> </a> Ocelescope </label> <div class=md-nav__source> <a href=https://github.com/rwth-pads/ocelescope title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Ocelescope </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Evaluation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Evaluation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../evaluation/plugin/ class=md-nav__link> <span class=md-ellipsis> Plugin Evaluation </span> </a> </li> <li class=md-nav__item> <a href=../../evaluation/tool/ class=md-nav__link> <span class=md-ellipsis> Tool Evaluation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Plugin Development </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Plugin Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../plugin_class/ class=md-nav__link> <span class=md-ellipsis> Plugin Class </span> </a> </li> <li class=md-nav__item> <a href=../resource/ class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> <li class=md-nav__item> <a href=../extension/ class=md-nav__link> <span class=md-ellipsis> Extensions </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Tutorial: OCEL Graph </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Tutorial: OCEL Graph </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#step-1-setup class=md-nav__link> <span class=md-ellipsis> Step 1: Setup </span> </a> </li> <li class=md-nav__item> <a href=#step-2-writing-the-plugin class=md-nav__link> <span class=md-ellipsis> Step 2: Writing the Plugin </span> </a> <nav class=md-nav aria-label="Step 2: Writing the Plugin"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#writing-plugin-metadata class=md-nav__link> <span class=md-ellipsis> Writing Plugin Metadata </span> </a> </li> <li class=md-nav__item> <a href=#adding-a-plugin-method class=md-nav__link> <span class=md-ellipsis> Adding a Plugin Method </span> </a> </li> <li class=md-nav__item> <a href=#defining-plugin-inputs class=md-nav__link> <span class=md-ellipsis> Defining Plugin Inputs </span> </a> <nav class=md-nav aria-label="Defining Plugin Inputs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-an-ocel-input class=md-nav__link> <span class=md-ellipsis> Adding an OCEL Input </span> </a> </li> <li class=md-nav__item> <a href=#adding-a-configuration-input class=md-nav__link> <span class=md-ellipsis> Adding a Configuration Input </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#defining-a-resource class=md-nav__link> <span class=md-ellipsis> Defining a Resource </span> </a> <nav class=md-nav aria-label="Defining a Resource"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#visualization class=md-nav__link> <span class=md-ellipsis> Visualization </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementing-the-plugin-method class=md-nav__link> <span class=md-ellipsis> Implementing the Plugin Method </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#step-3-build-plugin class=md-nav__link> <span class=md-ellipsis> Step 3: Build Plugin </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> References </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> OCEL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> OCEL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../references/core/ class=md-nav__link> <span class=md-ellipsis> Core </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1_2> <label class=md-nav__link for=__nav_4_1_2 id=__nav_4_1_2_label tabindex=0> <span class=md-ellipsis> Managers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_2> <span class="md-nav__icon md-icon"></span> Managers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../references/managers/objects/ class=md-nav__link> <span class=md-ellipsis> Objects </span> </a> </li> <li class=md-nav__item> <a href=../../references/managers/events/ class=md-nav__link> <span class=md-ellipsis> Events </span> </a> </li> <li class=md-nav__item> <a href=../../references/managers/e2o/ class=md-nav__link> <span class=md-ellipsis> E2o </span> </a> </li> <li class=md-nav__item> <a href=../../references/managers/o2o/ class=md-nav__link> <span class=md-ellipsis> O2o </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../references/extensions/ class=md-nav__link> <span class=md-ellipsis> Extensions </span> </a> </li> <li class=md-nav__item> <a href=../../references/filters/ class=md-nav__link> <span class=md-ellipsis> Filters </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1_5> <label class=md-nav__link for=__nav_4_1_5 id=__nav_4_1_5_label tabindex=0> <span class=md-ellipsis> Models </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_5> <span class="md-nav__icon md-icon"></span> Models </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../references/models/attributes/ class=md-nav__link> <span class=md-ellipsis> Attributes </span> </a> </li> <li class=md-nav__item> <a href=../../references/models/relations/ class=md-nav__link> <span class=md-ellipsis> Relations </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/rwth-pads/ocelescope/edit/master/docs/plugins/tutorial.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=tutorial-ocel-graph>Tutorial: OCEL Graph<a class=headerlink href=#tutorial-ocel-graph title="Permanent link">&para;</a></h1> <p>This tutorial provides a general example for developing an Ocelescope plugin from scratch.</p> <p>In this tutorial, we will build an <strong>OCEL Graph plugin</strong> inspired by the OCELGraph feature of the <a href=https://ocpq.aarkue.eu/ >OCPQ</a> tool.</p> <p>An <strong>OCEL graph</strong> visualizes how objects and events are related to each other. The plugin lets you choose an object or event ID as the starting point (the root), and then builds a spanning tree from that root based on the connected relationships in the ocel. You can also set how far the graph should expand from the starting point.</p> <div class=grid> <figure> <img alt="Image title" src=../../assets/ocel-graph-input.png> <br> <figcaption align=center>The input of the OCEL Graph</figcaption> </figure> <figure> <img alt="Image title" src=../../assets/ocel-graph.png> <br> <figcaption align=center>The output of the OCEL Graph</figcaption> </figure> </div> <div class="admonition tip"> <p class=admonition-title>Try out OCELGraph</p> <p>You can explore the source code in the repository below, or download the plugin and try it out yourself.</p> <p><div style="display: flex; gap: 1rem; justify-content: start;" markdown> <a href=https://github.com/Grkmr/OcelGraph/releases/download/v1.0/ocel_graph.zip><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span> <strong>Download</strong></a> <a href=https://github.com/Grkmr/ocelgraph><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></span> <strong>Source</strong></a> </div></p> </div> <div class="admonition requirements"> <p class=admonition-title>Requirements</p> <p>This project requires Python 3.12 to be installed on your system. For easy and reproducible package management, we recommend using <a title=https://docs.astral.sh/uv/ href>uv</a>.</p> </div> <h2 id=step-1-setup>Step 1: Setup<a class=headerlink href=#step-1-setup title="Permanent link">&para;</a></h2> <p>To get started, we recommend using the official template for plugin development. You can quickly generate a new project using uvx, a tool from the uv project that allows you to run project generators like cookiecutter. To use the template with uvx, run:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a>uvx<span class=w> </span>cookiecutter<span class=w> </span>gh:rwth-pads/ocelescope<span class=w> </span>--directory<span class=w> </span>template
</span></code></pre></div></td></tr></table></div> <p>Alternatively, you can clone the template repository directly:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a>git<span class=w> </span>clone<span class=w> </span>git@github.com:Grkmr/Ocelescope-Template.git
</span></code></pre></div></td></tr></table></div> <p>Once you have your project set up, install all dependencies with:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a>uv<span class=w> </span>sync
</span></code></pre></div></td></tr></table></div> <p>If you prefer not to use uv or uvx, you can also use other Python package managers such as pip, pip-tools, or poetry to install dependencies. Simply reference the requirements.txt or pyproject.toml file included in the template. For example, with pip you can run:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a>pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements.txt
</span></code></pre></div></td></tr></table></div> <p>If you used the template, you should already have a plugin set up with the necessary metadata, and your project structure should look like the following:</p> <div class="language-text highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1> 1</a></span>
<span class=normal><a href=#__codelineno-4-2> 2</a></span>
<span class=normal><a href=#__codelineno-4-3> 3</a></span>
<span class=normal><a href=#__codelineno-4-4> 4</a></span>
<span class=normal><a href=#__codelineno-4-5> 5</a></span>
<span class=normal><a href=#__codelineno-4-6> 6</a></span>
<span class=normal><a href=#__codelineno-4-7> 7</a></span>
<span class=normal><a href=#__codelineno-4-8> 8</a></span>
<span class=normal><a href=#__codelineno-4-9> 9</a></span>
<span class=normal><a href=#__codelineno-4-10>10</a></span>
<span class=normal><a href=#__codelineno-4-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a>ocel-graph/
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a>├── scripts/
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a>│   └── ...
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a>├── src/
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a>│   └── ocel_graph/
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a>│       ├── __init__.py
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a>│       └── plugin.py
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8></a>├── LICENSE
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9></a>├── README.md
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10></a>├── pyproject.toml
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11></a>└── requierements.txt
</span></code></pre></div></td></tr></table></div> <p>The template is designed as a minimal example, with the entire plugin logic contained in the <code>plugin.py</code> file. This makes it easy to get started and see how everything works in one place.</p> <p>We highly recommend using Git for version control. If you haven’t already initialized a Git repository in your project, you can do so now with:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a>git<span class=w> </span>init
</span></code></pre></div></td></tr></table></div> <p>If you are using Git, the Cookiecutter template also sets up a <a href=https://pre-commit.com/ >pre-commit</a> hook that will automatically format your code before each commit. To activate this hook, simply run:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a>precommit<span class=w> </span>install<span class=w> </span>
</span></code></pre></div></td></tr></table></div> <p>or if you are using uv:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a>uvx<span class=w> </span>precommit<span class=w> </span>install
</span></code></pre></div></td></tr></table></div> <h2 id=step-2-writing-the-plugin>Step 2: Writing the Plugin<a class=headerlink href=#step-2-writing-the-plugin title="Permanent link">&para;</a></h2> <h3 id=writing-plugin-metadata>Writing Plugin Metadata<a class=headerlink href=#writing-plugin-metadata title="Permanent link">&para;</a></h3> <p>An Ocelescope plugin is defined by its Plugin Class. Let's start by adding some metadata to it.</p> <p>If you created your project using the Cookiecutter template, this should already be set up for you. If not, open <code>plugin.py</code>, find the plugin class, and rename the class and its metadata to something like the following:</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1>1</a></span>
<span class=normal><a href=#__codelineno-8-2>2</a></span>
<span class=normal><a href=#__codelineno-8-3>3</a></span>
<span class=normal><a href=#__codelineno-8-4>4</a></span>
<span class=normal><a href=#__codelineno-8-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=k>class</span><span class=w> </span><span class=nc>OcelGraphDiscovery</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a>    <span class=n>label</span> <span class=o>=</span> <span class=s2>&quot;OCEL Graph&quot;</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a>    <span class=n>description</span> <span class=o>=</span> <span class=s2>&quot;Generate your own OCEL Graph&quot;</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a>    <span class=n>version</span> <span class=o>=</span> <span class=s2>&quot;0.1.0&quot;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5></a>    <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> <ul> <li>The class name (OcelGraphDiscovery) is the unique name of your plugin and is used to distinguish it from other plugins.</li> <li>The label is what will be shown in the UI.</li> <li>The description briefly explains what your plugin does.</li> <li>The version field lets you update your plugin with new features or bug fixes over time.</li> </ul> <h3 id=adding-a-plugin-method>Adding a Plugin Method<a class=headerlink href=#adding-a-plugin-method title="Permanent link">&para;</a></h3> <p>Now let’s start writing the actual script that processes an OCEL and generates an OCEL Graph.</p> <p>Add a new method to your plugin class called <code>mine_ocel_graph</code>. Every plugin method should be decorated with <code>@plugin_method</code>, where you can specify a label and a description. These will be displayed in the frontend interface.</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1>1</a></span>
<span class=normal><a href=#__codelineno-9-2>2</a></span>
<span class=normal><a href=#__codelineno-9-3>3</a></span>
<span class=normal><a href=#__codelineno-9-4>4</a></span>
<span class=normal><a href=#__codelineno-9-5>5</a></span>
<span class=normal><a href=#__codelineno-9-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=k>class</span><span class=w> </span><span class=nc>OcelGraphDiscovery</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a>    <span class=nd>@plugin_method</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s2>&quot;Mine OCEL Graph&quot;</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Mines a ocel graph&quot;</span><span class=p>)</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3></a>    <span class=k>def</span><span class=w> </span><span class=nf>mine_ocel_graph</span><span class=p>(</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5></a>    <span class=p>):</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6></a>        <span class=k>pass</span>
</span></code></pre></div></td></tr></table></div> <h3 id=defining-plugin-inputs>Defining Plugin Inputs<a class=headerlink href=#defining-plugin-inputs title="Permanent link">&para;</a></h3> <p>When writing a plugin method, it’s always important to think beforehand about its inputs and outputs. For our OCEL Graph plugin, we need the following inputs:</p> <ul> <li>ocel: The OCEL log to analyze.</li> <li>entity_id: An identifier for the root of the graph. This can be either an object ID or an event ID from the OCEL log.</li> <li>max_depth: The maximum depth to which the graph should be explored from the root entity.</li> <li>max_neighbours: The maximum number of neighbours to include at each step, to prevent the graph from growing too large and becoming unmanageable.</li> </ul> <p>As an output, our method will return an OCEL graph. Since plugin methods in Ocelescope can only return either OCEL logs or resources, the OCEL graph must be implemented as a resource.</p> <pre class=mermaid><code>flowchart LR
    subgraph inputs [Inputs]
    OCEL["OCEL Log"]
    EntityID["Entity ID&lt;br/&gt;(object or event ID)"]
    MaxDepth["Max Depth"]
    MaxNeighbours["Max Neighbours"]
    end

    Method["mine_ocel_graph()"]

    subgraph outputs [Outputs]
    OCELGraph["OCEL Graph&lt;br/&gt;(Resource)"]
    end


    inputs --&gt; Method
    Method --&gt; outputs

    EntityID -. references .-&gt; OCEL</code></pre> <h4 id=adding-an-ocel-input>Adding an OCEL Input<a class=headerlink href=#adding-an-ocel-input title="Permanent link">&para;</a></h4> <p>Since our goal is to create an OCEL Graph, we need to have an OCEL log as one of the method inputs. This can be done by simply adding it as a parameter to the mine_ocel_graph method:</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span>
<span class=normal><a href=#__codelineno-10-4>4</a></span>
<span class=normal><a href=#__codelineno-10-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope</span><span class=w> </span><span class=kn>import</span> <span class=n>OCEL</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=o>...</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a>  <span class=nd>@plugin_method</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s2>&quot;Mine OCEL Graph&quot;</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Mines a ocel graph&quot;</span><span class=p>)</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a>  <span class=k>def</span><span class=w> </span><span class=nf>mine_ocel_graph</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>ocel</span><span class=p>:</span> <span class=n>OCEL</span><span class=p>):</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a>      <span class=k>pass</span>
</span></code></pre></div></td></tr></table></div> <p>To make it easier for users in the frontend, you can give this input a prettier name and a helpful description. You do this by annotating the parameter with the OCELAnnotation class:</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1> 1</a></span>
<span class=normal><a href=#__codelineno-11-2> 2</a></span>
<span class=normal><a href=#__codelineno-11-3> 3</a></span>
<span class=normal><a href=#__codelineno-11-4> 4</a></span>
<span class=normal><a href=#__codelineno-11-5> 5</a></span>
<span class=normal><a href=#__codelineno-11-6> 6</a></span>
<span class=normal><a href=#__codelineno-11-7> 7</a></span>
<span class=normal><a href=#__codelineno-11-8> 8</a></span>
<span class=normal><a href=#__codelineno-11-9> 9</a></span>
<span class=normal><a href=#__codelineno-11-10>10</a></span>
<span class=normal><a href=#__codelineno-11-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=k>def</span><span class=w> </span><span class=nf>mine_ocel_graph</span><span class=p>(</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3></a>    <span class=n>ocel</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4></a>        <span class=n>OCEL</span><span class=p>,</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5></a>        <span class=n>OCELAnnotation</span><span class=p>(</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6></a>            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Event Log&quot;</span><span class=p>,</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7></a>            <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The log from which the OCEL graph should be mined&quot;</span><span class=p>,</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8></a>        <span class=p>),</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9></a>    <span class=p>],</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10></a><span class=p>):</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11></a>    <span class=k>pass</span>
</span></code></pre></div></td></tr></table></div> <p>Now, in the frontend, users will see a friendly label and description when selecting the OCEL log input for your plugin.</p> <h4 id=adding-a-configuration-input>Adding a Configuration Input<a class=headerlink href=#adding-a-configuration-input title="Permanent link">&para;</a></h4> <p>To make the OCEL Graph plugin interactive, we’ll define a configuration input class.<br> This allows users to add configuration parameters for the plugin method..</p> <p>First, either add a new input class or rewrite the existing input class in your template.<br> Rename the class to <code>OCELGraphInput</code> to match your plugin.</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span>
<span class=normal><a href=#__codelineno-12-2>2</a></span>
<span class=normal><a href=#__codelineno-12-3>3</a></span>
<span class=normal><a href=#__codelineno-12-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope</span><span class=w> </span><span class=kn>import</span> <span class=n>PluginInput</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2></a>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3></a><span class=k>class</span><span class=w> </span><span class=nc>OCELGraphInput</span><span class=p>(</span><span class=n>PluginInput</span><span class=p>,</span> <span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4></a>    <span class=k>pass</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition warning"> <p class=admonition-title>Why frozen=True is important</p> <p>Always set <code>frozen=True</code> when inheriting from <code>PluginInput</code>.<br> This makes your configuration input immutable, which is required by Ocelescope for proper validation and stability.</p> </div> <p>Now, extend your <code>OCELGraphInput</code> class to include configuration parameters for the <strong>maximum depth</strong> of the OCEL graph and the <strong>maximum number of neighbours</strong> per node.</p> <p>Use <a href=https://docs.pydantic.dev/latest/concepts/fields/ >Pydantic’s <code>Field</code></a> to set titles, descriptions, defaults, and constraints for these integer values.</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1> 1</a></span>
<span class=normal><a href=#__codelineno-13-2> 2</a></span>
<span class=normal><a href=#__codelineno-13-3> 3</a></span>
<span class=normal><a href=#__codelineno-13-4> 4</a></span>
<span class=normal><a href=#__codelineno-13-5> 5</a></span>
<span class=normal><a href=#__codelineno-13-6> 6</a></span>
<span class=normal><a href=#__codelineno-13-7> 7</a></span>
<span class=normal><a href=#__codelineno-13-8> 8</a></span>
<span class=normal><a href=#__codelineno-13-9> 9</a></span>
<span class=normal><a href=#__codelineno-13-10>10</a></span>
<span class=normal><a href=#__codelineno-13-11>11</a></span>
<span class=normal><a href=#__codelineno-13-12>12</a></span>
<span class=normal><a href=#__codelineno-13-13>13</a></span>
<span class=normal><a href=#__codelineno-13-14>14</a></span>
<span class=normal><a href=#__codelineno-13-15>15</a></span>
<span class=normal><a href=#__codelineno-13-16>16</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>Field</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2></a>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3></a><span class=k>class</span><span class=w> </span><span class=nc>OCELGraphInput</span><span class=p>(</span><span class=n>PluginInput</span><span class=p>,</span> <span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4></a>    <span class=n>depth</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;OCEL Graph Depth&quot;</span><span class=p>,</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The maximum depth of the OCEL graph&quot;</span><span class=p>,</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7></a>        <span class=n>default</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8></a>        <span class=n>gt</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9></a>        <span class=n>le</span><span class=o>=</span><span class=mi>10</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10></a>    <span class=p>)</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11></a>    <span class=n>max_neighbours</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Maximum Neighbours&quot;</span><span class=p>,</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The maximum amount of neighbours a node can have&quot;</span><span class=p>,</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14></a>        <span class=n>default</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15></a>        <span class=n>gt</span><span class=o>=</span><span class=mi>0</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> <p>To let users select the root entity of the OCEL graph, define two classes:</p> <ul> <li><code>ObjectRoot</code> for selecting an object by its ID </li> <li><code>EventRoot</code> for selecting an event by its ID </li> </ul> <p>Each class uses the <code>OCEL_FIELD</code> helper to link the field to the selected OCEL log, enabling autocomplete and validation in the UI.</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-14-1> 1</a></span>
<span class=normal><a href=#__codelineno-14-2> 2</a></span>
<span class=normal><a href=#__codelineno-14-3> 3</a></span>
<span class=normal><a href=#__codelineno-14-4> 4</a></span>
<span class=normal><a href=#__codelineno-14-5> 5</a></span>
<span class=normal><a href=#__codelineno-14-6> 6</a></span>
<span class=normal><a href=#__codelineno-14-7> 7</a></span>
<span class=normal><a href=#__codelineno-14-8> 8</a></span>
<span class=normal><a href=#__codelineno-14-9> 9</a></span>
<span class=normal><a href=#__codelineno-14-10>10</a></span>
<span class=normal><a href=#__codelineno-14-11>11</a></span>
<span class=normal><a href=#__codelineno-14-12>12</a></span>
<span class=normal><a href=#__codelineno-14-13>13</a></span>
<span class=normal><a href=#__codelineno-14-14>14</a></span>
<span class=normal><a href=#__codelineno-14-15>15</a></span>
<span class=normal><a href=#__codelineno-14-16>16</a></span>
<span class=normal><a href=#__codelineno-14-17>17</a></span>
<span class=normal><a href=#__codelineno-14-18>18</a></span>
<span class=normal><a href=#__codelineno-14-19>19</a></span>
<span class=normal><a href=#__codelineno-14-20>20</a></span>
<span class=normal><a href=#__codelineno-14-21>21</a></span>
<span class=normal><a href=#__codelineno-14-22>22</a></span>
<span class=normal><a href=#__codelineno-14-23>23</a></span>
<span class=normal><a href=#__codelineno-14-24>24</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope</span><span class=w> </span><span class=kn>import</span> <span class=n>OCEL_FIELD</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3></a>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4></a><span class=k>class</span><span class=w> </span><span class=nc>ObjectRoot</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6></a>        <span class=n>title</span> <span class=o>=</span> <span class=s2>&quot;Object&quot;</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7></a>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8></a>    <span class=n>object_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>OCEL_FIELD</span><span class=p>(</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9></a>        <span class=n>field_type</span><span class=o>=</span><span class=s2>&quot;object_id&quot;</span><span class=p>,</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Object Id&quot;</span><span class=p>,</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11></a>        <span class=n>ocel_id</span><span class=o>=</span><span class=s2>&quot;ocel&quot;</span><span class=p>,</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The ID of the Object which is the root of the OCEL Graph&quot;</span><span class=p>,</span>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13></a>    <span class=p>)</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14></a>
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15></a><span class=k>class</span><span class=w> </span><span class=nc>EventRoot</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17></a>        <span class=n>title</span> <span class=o>=</span> <span class=s2>&quot;Event&quot;</span>
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18></a>
</span><span id=__span-14-19><a id=__codelineno-14-19 name=__codelineno-14-19></a>    <span class=n>event_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>OCEL_FIELD</span><span class=p>(</span>
</span><span id=__span-14-20><a id=__codelineno-14-20 name=__codelineno-14-20></a>        <span class=n>field_type</span><span class=o>=</span><span class=s2>&quot;event_id&quot;</span><span class=p>,</span>
</span><span id=__span-14-21><a id=__codelineno-14-21 name=__codelineno-14-21></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Event Id&quot;</span><span class=p>,</span>
</span><span id=__span-14-22><a id=__codelineno-14-22 name=__codelineno-14-22></a>        <span class=n>ocel_id</span><span class=o>=</span><span class=s2>&quot;ocel&quot;</span><span class=p>,</span>
</span><span id=__span-14-23><a id=__codelineno-14-23 name=__codelineno-14-23></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The ID of the Event which is the root of the OCEL Graph&quot;</span><span class=p>,</span>
</span><span id=__span-14-24><a id=__codelineno-14-24 name=__codelineno-14-24></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> <p>These classes are then combined in your main input class using a <strong>union</strong> type (<code>ObjectRoot | EventRoot</code>):</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-15-1>1</a></span>
<span class=normal><a href=#__codelineno-15-2>2</a></span>
<span class=normal><a href=#__codelineno-15-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1></a><span class=k>class</span><span class=w> </span><span class=nc>OCELGraphInput</span><span class=p>(</span><span class=n>PluginInput</span><span class=p>,</span> <span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2></a>    <span class=n>root</span><span class=p>:</span> <span class=n>ObjectRoot</span> <span class=o>|</span> <span class=n>EventRoot</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3></a>    <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> <p><strong>Why use a union?</strong><br> The union type allows users to select <em>either</em> an object or an event as the root entity of the OCEL graph, but not both at the same time. This creates a flexible input in the UI, where the user first chooses the entity type (object or event), and then provides the appropriate ID.</p> <p>The <code>Config</code> class provides a user-friendly label for each option in the frontend.<br> The <code>OCEL_FIELD</code> helper ensures that the field will autocomplete with available IDs from the OCEL log chosen by the user.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>The <code>ocel_id</code> argument in <code>OCEL_FIELD</code> must exactly match the name of the OCEL parameter in your plugin method<br> (for example, <code>ocel</code> in <code>def mine_ocel_graph(self, ocel: OCEL, ...)</code>).<br> This ensures that the field is correctly linked to the user-selected OCEL log and will display the appropriate dropdown/autocomplete values.</p> </div> <p>The final code for your configuration input class looks like this:</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-16-1> 1</a></span>
<span class=normal><a href=#__codelineno-16-2> 2</a></span>
<span class=normal><a href=#__codelineno-16-3> 3</a></span>
<span class=normal><a href=#__codelineno-16-4> 4</a></span>
<span class=normal><a href=#__codelineno-16-5> 5</a></span>
<span class=normal><a href=#__codelineno-16-6> 6</a></span>
<span class=normal><a href=#__codelineno-16-7> 7</a></span>
<span class=normal><a href=#__codelineno-16-8> 8</a></span>
<span class=normal><a href=#__codelineno-16-9> 9</a></span>
<span class=normal><a href=#__codelineno-16-10>10</a></span>
<span class=normal><a href=#__codelineno-16-11>11</a></span>
<span class=normal><a href=#__codelineno-16-12>12</a></span>
<span class=normal><a href=#__codelineno-16-13>13</a></span>
<span class=normal><a href=#__codelineno-16-14>14</a></span>
<span class=normal><a href=#__codelineno-16-15>15</a></span>
<span class=normal><a href=#__codelineno-16-16>16</a></span>
<span class=normal><a href=#__codelineno-16-17>17</a></span>
<span class=normal><a href=#__codelineno-16-18>18</a></span>
<span class=normal><a href=#__codelineno-16-19>19</a></span>
<span class=normal><a href=#__codelineno-16-20>20</a></span>
<span class=normal><a href=#__codelineno-16-21>21</a></span>
<span class=normal><a href=#__codelineno-16-22>22</a></span>
<span class=normal><a href=#__codelineno-16-23>23</a></span>
<span class=normal><a href=#__codelineno-16-24>24</a></span>
<span class=normal><a href=#__codelineno-16-25>25</a></span>
<span class=normal><a href=#__codelineno-16-26>26</a></span>
<span class=normal><a href=#__codelineno-16-27>27</a></span>
<span class=normal><a href=#__codelineno-16-28>28</a></span>
<span class=normal><a href=#__codelineno-16-29>29</a></span>
<span class=normal><a href=#__codelineno-16-30>30</a></span>
<span class=normal><a href=#__codelineno-16-31>31</a></span>
<span class=normal><a href=#__codelineno-16-32>32</a></span>
<span class=normal><a href=#__codelineno-16-33>33</a></span>
<span class=normal><a href=#__codelineno-16-34>34</a></span>
<span class=normal><a href=#__codelineno-16-35>35</a></span>
<span class=normal><a href=#__codelineno-16-36>36</a></span>
<span class=normal><a href=#__codelineno-16-37>37</a></span>
<span class=normal><a href=#__codelineno-16-38>38</a></span>
<span class=normal><a href=#__codelineno-16-39>39</a></span>
<span class=normal><a href=#__codelineno-16-40>40</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope</span><span class=w> </span><span class=kn>import</span> <span class=n>OCEL_FIELD</span><span class=p>,</span> <span class=n>PluginInput</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4></a><span class=k>class</span><span class=w> </span><span class=nc>ObjectRoot</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6></a>        <span class=n>title</span> <span class=o>=</span> <span class=s2>&quot;Object&quot;</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7></a>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8></a>    <span class=n>object_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>OCEL_FIELD</span><span class=p>(</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9></a>        <span class=n>field_type</span><span class=o>=</span><span class=s2>&quot;object_id&quot;</span><span class=p>,</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Object Id&quot;</span><span class=p>,</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11></a>        <span class=n>ocel_id</span><span class=o>=</span><span class=s2>&quot;ocel&quot;</span><span class=p>,</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The ID of the Object which is the root of the OcelGraph&quot;</span><span class=p>,</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13></a>    <span class=p>)</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14></a>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15></a><span class=k>class</span><span class=w> </span><span class=nc>EventRoot</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17></a>        <span class=n>title</span> <span class=o>=</span> <span class=s2>&quot;Event&quot;</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18></a>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19></a>    <span class=n>event_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>OCEL_FIELD</span><span class=p>(</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20></a>        <span class=n>field_type</span><span class=o>=</span><span class=s2>&quot;event_id&quot;</span><span class=p>,</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Event Id&quot;</span><span class=p>,</span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22></a>        <span class=n>ocel_id</span><span class=o>=</span><span class=s2>&quot;ocel&quot;</span><span class=p>,</span>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The ID of the Event which is the root of the OcelGraph&quot;</span><span class=p>,</span>
</span><span id=__span-16-24><a id=__codelineno-16-24 name=__codelineno-16-24></a>    <span class=p>)</span>
</span><span id=__span-16-25><a id=__codelineno-16-25 name=__codelineno-16-25></a>
</span><span id=__span-16-26><a id=__codelineno-16-26 name=__codelineno-16-26></a><span class=k>class</span><span class=w> </span><span class=nc>OCELGraphInput</span><span class=p>(</span><span class=n>PluginInput</span><span class=p>,</span> <span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
</span><span id=__span-16-27><a id=__codelineno-16-27 name=__codelineno-16-27></a>    <span class=n>root</span><span class=p>:</span> <span class=n>ObjectRoot</span> <span class=o>|</span> <span class=n>EventRoot</span>
</span><span id=__span-16-28><a id=__codelineno-16-28 name=__codelineno-16-28></a>    <span class=n>depth</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span>
</span><span id=__span-16-29><a id=__codelineno-16-29 name=__codelineno-16-29></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;OCEL Graph Depth&quot;</span><span class=p>,</span>
</span><span id=__span-16-30><a id=__codelineno-16-30 name=__codelineno-16-30></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The maximum depth of the ocel graph&quot;</span><span class=p>,</span>
</span><span id=__span-16-31><a id=__codelineno-16-31 name=__codelineno-16-31></a>        <span class=n>default</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-16-32><a id=__codelineno-16-32 name=__codelineno-16-32></a>        <span class=n>gt</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-16-33><a id=__codelineno-16-33 name=__codelineno-16-33></a>        <span class=n>le</span><span class=o>=</span><span class=mi>10</span>
</span><span id=__span-16-34><a id=__codelineno-16-34 name=__codelineno-16-34></a>    <span class=p>)</span>
</span><span id=__span-16-35><a id=__codelineno-16-35 name=__codelineno-16-35></a>    <span class=n>max_neighbours</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span>
</span><span id=__span-16-36><a id=__codelineno-16-36 name=__codelineno-16-36></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Maximum Neighbours&quot;</span><span class=p>,</span>
</span><span id=__span-16-37><a id=__codelineno-16-37 name=__codelineno-16-37></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The maximum amount of neighbours a node can have&quot;</span><span class=p>,</span>
</span><span id=__span-16-38><a id=__codelineno-16-38 name=__codelineno-16-38></a>        <span class=n>gt</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-16-39><a id=__codelineno-16-39 name=__codelineno-16-39></a>        <span class=n>default</span><span class=o>=</span><span class=mi>5</span>
</span><span id=__span-16-40><a id=__codelineno-16-40 name=__codelineno-16-40></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> <p>This code creates the following input form in the frontend:</p> <p><img alt="OCEL Graph Input Example" src=../../assets/ocel-graph-input.png></p> <h3 id=defining-a-resource>Defining a Resource<a class=headerlink href=#defining-a-resource title="Permanent link">&para;</a></h3> <p>We want to define a custom output—an OCEL Graph—which in Ocelescope is done by creating a Python class that inherits from the <code>Resource</code> class.</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-17-1> 1</a></span>
<span class=normal><a href=#__codelineno-17-2> 2</a></span>
<span class=normal><a href=#__codelineno-17-3> 3</a></span>
<span class=normal><a href=#__codelineno-17-4> 4</a></span>
<span class=normal><a href=#__codelineno-17-5> 5</a></span>
<span class=normal><a href=#__codelineno-17-6> 6</a></span>
<span class=normal><a href=#__codelineno-17-7> 7</a></span>
<span class=normal><a href=#__codelineno-17-8> 8</a></span>
<span class=normal><a href=#__codelineno-17-9> 9</a></span>
<span class=normal><a href=#__codelineno-17-10>10</a></span>
<span class=normal><a href=#__codelineno-17-11>11</a></span>
<span class=normal><a href=#__codelineno-17-12>12</a></span>
<span class=normal><a href=#__codelineno-17-13>13</a></span>
<span class=normal><a href=#__codelineno-17-14>14</a></span>
<span class=normal><a href=#__codelineno-17-15>15</a></span>
<span class=normal><a href=#__codelineno-17-16>16</a></span>
<span class=normal><a href=#__codelineno-17-17>17</a></span>
<span class=normal><a href=#__codelineno-17-18>18</a></span>
<span class=normal><a href=#__codelineno-17-19>19</a></span>
<span class=normal><a href=#__codelineno-17-20>20</a></span>
<span class=normal><a href=#__codelineno-17-21>21</a></span>
<span class=normal><a href=#__codelineno-17-22>22</a></span>
<span class=normal><a href=#__codelineno-17-23>23</a></span>
<span class=normal><a href=#__codelineno-17-24>24</a></span>
<span class=normal><a href=#__codelineno-17-25>25</a></span>
<span class=normal><a href=#__codelineno-17-26>26</a></span>
<span class=normal><a href=#__codelineno-17-27>27</a></span>
<span class=normal><a href=#__codelineno-17-28>28</a></span>
<span class=normal><a href=#__codelineno-17-29>29</a></span>
<span class=normal><a href=#__codelineno-17-30>30</a></span>
<span class=normal><a href=#__codelineno-17-31>31</a></span>
<span class=normal><a href=#__codelineno-17-32>32</a></span>
<span class=normal><a href=#__codelineno-17-33>33</a></span>
<span class=normal><a href=#__codelineno-17-34>34</a></span>
<span class=normal><a href=#__codelineno-17-35>35</a></span>
<span class=normal><a href=#__codelineno-17-36>36</a></span>
<span class=normal><a href=#__codelineno-17-37>37</a></span>
<span class=normal><a href=#__codelineno-17-38>38</a></span>
<span class=normal><a href=#__codelineno-17-39>39</a></span>
<span class=normal><a href=#__codelineno-17-40>40</a></span>
<span class=normal><a href=#__codelineno-17-41>41</a></span>
<span class=normal><a href=#__codelineno-17-42>42</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope</span><span class=w> </span><span class=kn>import</span> <span class=n>Resource</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope.visualization</span><span class=w> </span><span class=kn>import</span> <span class=n>Graph</span><span class=p>,</span> <span class=n>GraphEdge</span><span class=p>,</span> <span class=n>GraphvizLayoutConfig</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope.visualization.default.graph</span><span class=w> </span><span class=kn>import</span> <span class=n>GraphNode</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope.visualization.util.color</span><span class=w> </span><span class=kn>import</span> <span class=n>generate_color_map</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6></a>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7></a><span class=k>class</span><span class=w> </span><span class=nc>EventNode</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9></a>    <span class=n>activity_type</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10></a>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11></a><span class=k>class</span><span class=w> </span><span class=nc>ObjectNode</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13></a>    <span class=n>object_type</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14></a>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15></a><span class=k>class</span><span class=w> </span><span class=nc>Relation</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16></a>    <span class=n>qualifier</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17></a>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18></a><span class=k>class</span><span class=w> </span><span class=nc>O2ORelation</span><span class=p>(</span><span class=n>Relation</span><span class=p>):</span>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19></a>    <span class=n>source</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20></a>    <span class=n>target</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21></a>
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22></a><span class=k>class</span><span class=w> </span><span class=nc>E2ORelation</span><span class=p>(</span><span class=n>Relation</span><span class=p>):</span>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23></a>    <span class=n>event_id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24></a>    <span class=n>object_id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25></a>    <span class=n>object_type</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26></a>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27></a><span class=k>class</span><span class=w> </span><span class=nc>OCELGraph</span><span class=p>(</span><span class=n>Resource</span><span class=p>):</span>
</span><span id=__span-17-28><a id=__codelineno-17-28 name=__codelineno-17-28></a>    <span class=n>label</span> <span class=o>=</span> <span class=s2>&quot;Ocel Graph&quot;</span>
</span><span id=__span-17-29><a id=__codelineno-17-29 name=__codelineno-17-29></a>    <span class=n>description</span> <span class=o>=</span> <span class=s2>&quot;A Ocel graph&quot;</span>
</span><span id=__span-17-30><a id=__codelineno-17-30 name=__codelineno-17-30></a>
</span><span id=__span-17-31><a id=__codelineno-17-31 name=__codelineno-17-31></a>    <span class=n>events</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>EventNode</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-17-32><a id=__codelineno-17-32 name=__codelineno-17-32></a>    <span class=n>objects</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>ObjectNode</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-17-33><a id=__codelineno-17-33 name=__codelineno-17-33></a>    <span class=n>e2o_relations</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>E2ORelation</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-17-34><a id=__codelineno-17-34 name=__codelineno-17-34></a>    <span class=n>o2o_relations</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>O2ORelation</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-17-35><a id=__codelineno-17-35 name=__codelineno-17-35></a>
</span><span id=__span-17-36><a id=__codelineno-17-36 name=__codelineno-17-36></a>    <span class=nd>@property</span>
</span><span id=__span-17-37><a id=__codelineno-17-37 name=__codelineno-17-37></a>    <span class=k>def</span><span class=w> </span><span class=nf>event_ids</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-17-38><a id=__codelineno-17-38 name=__codelineno-17-38></a>        <span class=k>return</span> <span class=p>[</span><span class=n>event</span><span class=o>.</span><span class=n>id</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>events</span><span class=p>]</span>
</span><span id=__span-17-39><a id=__codelineno-17-39 name=__codelineno-17-39></a>
</span><span id=__span-17-40><a id=__codelineno-17-40 name=__codelineno-17-40></a>    <span class=nd>@property</span>
</span><span id=__span-17-41><a id=__codelineno-17-41 name=__codelineno-17-41></a>    <span class=k>def</span><span class=w> </span><span class=nf>object_ids</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-17-42><a id=__codelineno-17-42 name=__codelineno-17-42></a>        <span class=k>return</span> <span class=p>[</span><span class=nb>object</span><span class=o>.</span><span class=n>id</span> <span class=k>for</span> <span class=nb>object</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>objects</span><span class=p>]</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition important"> <p class=admonition-title>Important</p> <p>All subclasses used as properties in your resource (such as <code>EventNode</code>, <code>ObjectNode</code>, <code>Relation</code>, <code>O2ORelation</code>, and <code>E2ORelation</code>) should inherit from Pydantic’s <code>BaseModel</code>.<br> This ensures that your data structures are compatible with Ocelescope’s validation and serialization.</p> </div> <p>You can also add a label and a description to your resource class, which helps the frontend display more user-friendly labels.</p> <p>A resource can include any property that can be serialized to JSON—such as lists, strings, numbers, or other <code>BaseModel</code> classes.</p> <p>You can also add any number of functions to work with the resource. For example, here’s how to get all event and object IDs inside the resource:</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-18-1>1</a></span>
<span class=normal><a href=#__codelineno-18-2>2</a></span>
<span class=normal><a href=#__codelineno-18-3>3</a></span>
<span class=normal><a href=#__codelineno-18-4>4</a></span>
<span class=normal><a href=#__codelineno-18-5>5</a></span>
<span class=normal><a href=#__codelineno-18-6>6</a></span>
<span class=normal><a href=#__codelineno-18-7>7</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1></a>    <span class=nd>@property</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2></a>    <span class=k>def</span><span class=w> </span><span class=nf>event_ids</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3></a>        <span class=k>return</span> <span class=p>[</span><span class=n>event</span><span class=o>.</span><span class=n>id</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>events</span><span class=p>]</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4></a>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5></a>    <span class=nd>@property</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6></a>    <span class=k>def</span><span class=w> </span><span class=nf>object_ids</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7></a>        <span class=k>return</span> <span class=p>[</span><span class=nb>object</span><span class=o>.</span><span class=n>id</span> <span class=k>for</span> <span class=nb>object</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>objects</span><span class=p>]</span>
</span></code></pre></div></td></tr></table></div> <p>To tell Ocelescope that your method returns your <code>OCELGraph</code>, add it as a type hint in your plugin method:</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-19-1>1</a></span>
<span class=normal><a href=#__codelineno-19-2>2</a></span>
<span class=normal><a href=#__codelineno-19-3>3</a></span>
<span class=normal><a href=#__codelineno-19-4>4</a></span>
<span class=normal><a href=#__codelineno-19-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1></a><span class=k>class</span><span class=w> </span><span class=nc>OcelGraphDiscovery</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2></a>    <span class=o>...</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3></a>    <span class=nd>@plugin_method</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s2>&quot;Mine OCEL Graph&quot;</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Mines an OCEL Graph&quot;</span><span class=p>)</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>mine_ocel_graph</span><span class=p>(</span><span class=o>...</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OCELGraph</span><span class=p>:</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5></a>        <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> <h4 id=visualization>Visualization<a class=headerlink href=#visualization title="Permanent link">&para;</a></h4> <p>At this point, our <code>OCELGraph</code> class can already be used as a resource and returned as an output from your plugin method. However, by default, it is just a data structure without any built-in visualization.</p> <p>To enable visualization in the Ocelescope frontend, you can extend your resource class by adding a <code>visualize</code> method.<br> A visualization function is a class method that returns a predefined visualization object (such as a <code>Graph</code>), and should include a type hint for clarity.</p> <p>For example, you can add the following <code>visualize</code> method to your <code>OCELGraph</code> class:</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-20-1> 1</a></span>
<span class=normal><a href=#__codelineno-20-2> 2</a></span>
<span class=normal><a href=#__codelineno-20-3> 3</a></span>
<span class=normal><a href=#__codelineno-20-4> 4</a></span>
<span class=normal><a href=#__codelineno-20-5> 5</a></span>
<span class=normal><a href=#__codelineno-20-6> 6</a></span>
<span class=normal><a href=#__codelineno-20-7> 7</a></span>
<span class=normal><a href=#__codelineno-20-8> 8</a></span>
<span class=normal><a href=#__codelineno-20-9> 9</a></span>
<span class=normal><a href=#__codelineno-20-10>10</a></span>
<span class=normal><a href=#__codelineno-20-11>11</a></span>
<span class=normal><a href=#__codelineno-20-12>12</a></span>
<span class=normal><a href=#__codelineno-20-13>13</a></span>
<span class=normal><a href=#__codelineno-20-14>14</a></span>
<span class=normal><a href=#__codelineno-20-15>15</a></span>
<span class=normal><a href=#__codelineno-20-16>16</a></span>
<span class=normal><a href=#__codelineno-20-17>17</a></span>
<span class=normal><a href=#__codelineno-20-18>18</a></span>
<span class=normal><a href=#__codelineno-20-19>19</a></span>
<span class=normal><a href=#__codelineno-20-20>20</a></span>
<span class=normal><a href=#__codelineno-20-21>21</a></span>
<span class=normal><a href=#__codelineno-20-22>22</a></span>
<span class=normal><a href=#__codelineno-20-23>23</a></span>
<span class=normal><a href=#__codelineno-20-24>24</a></span>
<span class=normal><a href=#__codelineno-20-25>25</a></span>
<span class=normal><a href=#__codelineno-20-26>26</a></span>
<span class=normal><a href=#__codelineno-20-27>27</a></span>
<span class=normal><a href=#__codelineno-20-28>28</a></span>
<span class=normal><a href=#__codelineno-20-29>29</a></span>
<span class=normal><a href=#__codelineno-20-30>30</a></span>
<span class=normal><a href=#__codelineno-20-31>31</a></span>
<span class=normal><a href=#__codelineno-20-32>32</a></span>
<span class=normal><a href=#__codelineno-20-33>33</a></span>
<span class=normal><a href=#__codelineno-20-34>34</a></span>
<span class=normal><a href=#__codelineno-20-35>35</a></span>
<span class=normal><a href=#__codelineno-20-36>36</a></span>
<span class=normal><a href=#__codelineno-20-37>37</a></span>
<span class=normal><a href=#__codelineno-20-38>38</a></span>
<span class=normal><a href=#__codelineno-20-39>39</a></span>
<span class=normal><a href=#__codelineno-20-40>40</a></span>
<span class=normal><a href=#__codelineno-20-41>41</a></span>
<span class=normal><a href=#__codelineno-20-42>42</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope</span><span class=w> </span><span class=kn>import</span> <span class=n>Resource</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope.visualization</span><span class=w> </span><span class=kn>import</span> <span class=n>Graph</span><span class=p>,</span> <span class=n>GraphEdge</span><span class=p>,</span> <span class=n>GraphvizLayoutConfig</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope.visualization.default.graph</span><span class=w> </span><span class=kn>import</span> <span class=n>GraphNode</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope.visualization.util.color</span><span class=w> </span><span class=kn>import</span> <span class=n>generate_color_map</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5></a>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6></a><span class=o>...</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7></a>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8></a><span class=k>class</span><span class=w> </span><span class=nc>OCELGraph</span><span class=p>(</span><span class=n>Resource</span><span class=p>):</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9></a>    <span class=o>...</span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>visualize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Graph</span><span class=p>:</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11></a>        <span class=n>color_map</span> <span class=o>=</span> <span class=n>generate_color_map</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>([</span><span class=nb>object</span><span class=o>.</span><span class=n>object_type</span> <span class=k>for</span> <span class=nb>object</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>objects</span><span class=p>])))</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12></a>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13></a>        <span class=n>object_nodes</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14></a>            <span class=n>GraphNode</span><span class=p>(</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15></a>                <span class=nb>id</span><span class=o>=</span><span class=n>object_node</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>shape</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=n>object_node</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=n>color_map</span><span class=p>[</span><span class=n>object_node</span><span class=o>.</span><span class=n>object_type</span><span class=p>]</span>
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16></a>            <span class=p>)</span>
</span><span id=__span-20-17><a id=__codelineno-20-17 name=__codelineno-20-17></a>            <span class=k>for</span> <span class=n>object_node</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>objects</span>
</span><span id=__span-20-18><a id=__codelineno-20-18 name=__codelineno-20-18></a>        <span class=p>]</span>
</span><span id=__span-20-19><a id=__codelineno-20-19 name=__codelineno-20-19></a>
</span><span id=__span-20-20><a id=__codelineno-20-20 name=__codelineno-20-20></a>        <span class=n>event_nodes</span> <span class=o>=</span> <span class=p>[</span><span class=n>GraphNode</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>event</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>shape</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=n>event</span><span class=o>.</span><span class=n>id</span><span class=p>)</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>events</span><span class=p>]</span>
</span><span id=__span-20-21><a id=__codelineno-20-21 name=__codelineno-20-21></a>
</span><span id=__span-20-22><a id=__codelineno-20-22 name=__codelineno-20-22></a>        <span class=n>e2o_edges</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-20-23><a id=__codelineno-20-23 name=__codelineno-20-23></a>            <span class=n>GraphEdge</span><span class=p>(</span>
</span><span id=__span-20-24><a id=__codelineno-20-24 name=__codelineno-20-24></a>                <span class=n>source</span><span class=o>=</span><span class=n>edge</span><span class=o>.</span><span class=n>event_id</span><span class=p>,</span>
</span><span id=__span-20-25><a id=__codelineno-20-25 name=__codelineno-20-25></a>                <span class=n>target</span><span class=o>=</span><span class=n>edge</span><span class=o>.</span><span class=n>object_id</span><span class=p>,</span>
</span><span id=__span-20-26><a id=__codelineno-20-26 name=__codelineno-20-26></a>                <span class=n>arrows</span><span class=o>=</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=kc>None</span><span class=p>),</span>
</span><span id=__span-20-27><a id=__codelineno-20-27 name=__codelineno-20-27></a>                <span class=n>color</span><span class=o>=</span><span class=n>color_map</span><span class=p>[</span><span class=n>edge</span><span class=o>.</span><span class=n>object_type</span><span class=p>],</span>
</span><span id=__span-20-28><a id=__codelineno-20-28 name=__codelineno-20-28></a>                <span class=n>label</span><span class=o>=</span><span class=n>edge</span><span class=o>.</span><span class=n>qualifier</span><span class=p>,</span>
</span><span id=__span-20-29><a id=__codelineno-20-29 name=__codelineno-20-29></a>            <span class=p>)</span>
</span><span id=__span-20-30><a id=__codelineno-20-30 name=__codelineno-20-30></a>            <span class=k>for</span> <span class=n>edge</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>e2o_relations</span>
</span><span id=__span-20-31><a id=__codelineno-20-31 name=__codelineno-20-31></a>        <span class=p>]</span>
</span><span id=__span-20-32><a id=__codelineno-20-32 name=__codelineno-20-32></a>        <span class=n>o2o_edges</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-20-33><a id=__codelineno-20-33 name=__codelineno-20-33></a>            <span class=n>GraphEdge</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=n>edge</span><span class=o>.</span><span class=n>source</span><span class=p>,</span> <span class=n>target</span><span class=o>=</span><span class=n>edge</span><span class=o>.</span><span class=n>target</span><span class=p>,</span> <span class=n>arrows</span><span class=o>=</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=kc>None</span><span class=p>),</span> <span class=n>label</span><span class=o>=</span><span class=n>edge</span><span class=o>.</span><span class=n>qualifier</span><span class=p>)</span>
</span><span id=__span-20-34><a id=__codelineno-20-34 name=__codelineno-20-34></a>            <span class=k>for</span> <span class=n>edge</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>o2o_relations</span>
</span><span id=__span-20-35><a id=__codelineno-20-35 name=__codelineno-20-35></a>        <span class=p>]</span>
</span><span id=__span-20-36><a id=__codelineno-20-36 name=__codelineno-20-36></a>
</span><span id=__span-20-37><a id=__codelineno-20-37 name=__codelineno-20-37></a>        <span class=k>return</span> <span class=n>Graph</span><span class=p>(</span>
</span><span id=__span-20-38><a id=__codelineno-20-38 name=__codelineno-20-38></a>            <span class=nb>type</span><span class=o>=</span><span class=s2>&quot;graph&quot;</span><span class=p>,</span>
</span><span id=__span-20-39><a id=__codelineno-20-39 name=__codelineno-20-39></a>            <span class=n>nodes</span><span class=o>=</span><span class=n>object_nodes</span> <span class=o>+</span> <span class=n>event_nodes</span><span class=p>,</span>
</span><span id=__span-20-40><a id=__codelineno-20-40 name=__codelineno-20-40></a>            <span class=n>edges</span><span class=o>=</span><span class=n>e2o_edges</span> <span class=o>+</span> <span class=n>o2o_edges</span><span class=p>,</span>
</span><span id=__span-20-41><a id=__codelineno-20-41 name=__codelineno-20-41></a>            <span class=n>layout_config</span><span class=o>=</span><span class=n>GraphvizLayoutConfig</span><span class=p>(</span><span class=n>engine</span><span class=o>=</span><span class=s2>&quot;neato&quot;</span><span class=p>,</span> <span class=n>graphAttrs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;overlap&quot;</span><span class=p>:</span> <span class=s2>&quot;prism&quot;</span><span class=p>}),</span>
</span><span id=__span-20-42><a id=__codelineno-20-42 name=__codelineno-20-42></a>        <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> <p>With this method, your resource will not only provide the OCEL graph data, but also a built-in visualization for the Ocelescope frontend to display.</p> <p><img alt="Image title" src=../../assets/ocel-graph.png></p> <h3 id=implementing-the-plugin-method>Implementing the Plugin Method<a class=headerlink href=#implementing-the-plugin-method title="Permanent link">&para;</a></h3> <p>Now let's implement the method which transforms our input (the OCEL and configuration) and returns our resource. For the sake of this tutorial, we won’t discuss the implementation details. Instead, we’ll add the implementation in a utility file to keep the plugin method itself clean and readable.</p> <p>For example, in your utility file (e.g., <code>util.py</code>):</p> <details class=details> <summary>Show mine_ocel_graph Implementation</summary> <div class="language-python highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>util.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-21-1>  1</a></span>
<span class=normal><a href=#__codelineno-21-2>  2</a></span>
<span class=normal><a href=#__codelineno-21-3>  3</a></span>
<span class=normal><a href=#__codelineno-21-4>  4</a></span>
<span class=normal><a href=#__codelineno-21-5>  5</a></span>
<span class=normal><a href=#__codelineno-21-6>  6</a></span>
<span class=normal><a href=#__codelineno-21-7>  7</a></span>
<span class=normal><a href=#__codelineno-21-8>  8</a></span>
<span class=normal><a href=#__codelineno-21-9>  9</a></span>
<span class=normal><a href=#__codelineno-21-10> 10</a></span>
<span class=normal><a href=#__codelineno-21-11> 11</a></span>
<span class=normal><a href=#__codelineno-21-12> 12</a></span>
<span class=normal><a href=#__codelineno-21-13> 13</a></span>
<span class=normal><a href=#__codelineno-21-14> 14</a></span>
<span class=normal><a href=#__codelineno-21-15> 15</a></span>
<span class=normal><a href=#__codelineno-21-16> 16</a></span>
<span class=normal><a href=#__codelineno-21-17> 17</a></span>
<span class=normal><a href=#__codelineno-21-18> 18</a></span>
<span class=normal><a href=#__codelineno-21-19> 19</a></span>
<span class=normal><a href=#__codelineno-21-20> 20</a></span>
<span class=normal><a href=#__codelineno-21-21> 21</a></span>
<span class=normal><a href=#__codelineno-21-22> 22</a></span>
<span class=normal><a href=#__codelineno-21-23> 23</a></span>
<span class=normal><a href=#__codelineno-21-24> 24</a></span>
<span class=normal><a href=#__codelineno-21-25> 25</a></span>
<span class=normal><a href=#__codelineno-21-26> 26</a></span>
<span class=normal><a href=#__codelineno-21-27> 27</a></span>
<span class=normal><a href=#__codelineno-21-28> 28</a></span>
<span class=normal><a href=#__codelineno-21-29> 29</a></span>
<span class=normal><a href=#__codelineno-21-30> 30</a></span>
<span class=normal><a href=#__codelineno-21-31> 31</a></span>
<span class=normal><a href=#__codelineno-21-32> 32</a></span>
<span class=normal><a href=#__codelineno-21-33> 33</a></span>
<span class=normal><a href=#__codelineno-21-34> 34</a></span>
<span class=normal><a href=#__codelineno-21-35> 35</a></span>
<span class=normal><a href=#__codelineno-21-36> 36</a></span>
<span class=normal><a href=#__codelineno-21-37> 37</a></span>
<span class=normal><a href=#__codelineno-21-38> 38</a></span>
<span class=normal><a href=#__codelineno-21-39> 39</a></span>
<span class=normal><a href=#__codelineno-21-40> 40</a></span>
<span class=normal><a href=#__codelineno-21-41> 41</a></span>
<span class=normal><a href=#__codelineno-21-42> 42</a></span>
<span class=normal><a href=#__codelineno-21-43> 43</a></span>
<span class=normal><a href=#__codelineno-21-44> 44</a></span>
<span class=normal><a href=#__codelineno-21-45> 45</a></span>
<span class=normal><a href=#__codelineno-21-46> 46</a></span>
<span class=normal><a href=#__codelineno-21-47> 47</a></span>
<span class=normal><a href=#__codelineno-21-48> 48</a></span>
<span class=normal><a href=#__codelineno-21-49> 49</a></span>
<span class=normal><a href=#__codelineno-21-50> 50</a></span>
<span class=normal><a href=#__codelineno-21-51> 51</a></span>
<span class=normal><a href=#__codelineno-21-52> 52</a></span>
<span class=normal><a href=#__codelineno-21-53> 53</a></span>
<span class=normal><a href=#__codelineno-21-54> 54</a></span>
<span class=normal><a href=#__codelineno-21-55> 55</a></span>
<span class=normal><a href=#__codelineno-21-56> 56</a></span>
<span class=normal><a href=#__codelineno-21-57> 57</a></span>
<span class=normal><a href=#__codelineno-21-58> 58</a></span>
<span class=normal><a href=#__codelineno-21-59> 59</a></span>
<span class=normal><a href=#__codelineno-21-60> 60</a></span>
<span class=normal><a href=#__codelineno-21-61> 61</a></span>
<span class=normal><a href=#__codelineno-21-62> 62</a></span>
<span class=normal><a href=#__codelineno-21-63> 63</a></span>
<span class=normal><a href=#__codelineno-21-64> 64</a></span>
<span class=normal><a href=#__codelineno-21-65> 65</a></span>
<span class=normal><a href=#__codelineno-21-66> 66</a></span>
<span class=normal><a href=#__codelineno-21-67> 67</a></span>
<span class=normal><a href=#__codelineno-21-68> 68</a></span>
<span class=normal><a href=#__codelineno-21-69> 69</a></span>
<span class=normal><a href=#__codelineno-21-70> 70</a></span>
<span class=normal><a href=#__codelineno-21-71> 71</a></span>
<span class=normal><a href=#__codelineno-21-72> 72</a></span>
<span class=normal><a href=#__codelineno-21-73> 73</a></span>
<span class=normal><a href=#__codelineno-21-74> 74</a></span>
<span class=normal><a href=#__codelineno-21-75> 75</a></span>
<span class=normal><a href=#__codelineno-21-76> 76</a></span>
<span class=normal><a href=#__codelineno-21-77> 77</a></span>
<span class=normal><a href=#__codelineno-21-78> 78</a></span>
<span class=normal><a href=#__codelineno-21-79> 79</a></span>
<span class=normal><a href=#__codelineno-21-80> 80</a></span>
<span class=normal><a href=#__codelineno-21-81> 81</a></span>
<span class=normal><a href=#__codelineno-21-82> 82</a></span>
<span class=normal><a href=#__codelineno-21-83> 83</a></span>
<span class=normal><a href=#__codelineno-21-84> 84</a></span>
<span class=normal><a href=#__codelineno-21-85> 85</a></span>
<span class=normal><a href=#__codelineno-21-86> 86</a></span>
<span class=normal><a href=#__codelineno-21-87> 87</a></span>
<span class=normal><a href=#__codelineno-21-88> 88</a></span>
<span class=normal><a href=#__codelineno-21-89> 89</a></span>
<span class=normal><a href=#__codelineno-21-90> 90</a></span>
<span class=normal><a href=#__codelineno-21-91> 91</a></span>
<span class=normal><a href=#__codelineno-21-92> 92</a></span>
<span class=normal><a href=#__codelineno-21-93> 93</a></span>
<span class=normal><a href=#__codelineno-21-94> 94</a></span>
<span class=normal><a href=#__codelineno-21-95> 95</a></span>
<span class=normal><a href=#__codelineno-21-96> 96</a></span>
<span class=normal><a href=#__codelineno-21-97> 97</a></span>
<span class=normal><a href=#__codelineno-21-98> 98</a></span>
<span class=normal><a href=#__codelineno-21-99> 99</a></span>
<span class=normal><a href=#__codelineno-21-100>100</a></span>
<span class=normal><a href=#__codelineno-21-101>101</a></span>
<span class=normal><a href=#__codelineno-21-102>102</a></span>
<span class=normal><a href=#__codelineno-21-103>103</a></span>
<span class=normal><a href=#__codelineno-21-104>104</a></span>
<span class=normal><a href=#__codelineno-21-105>105</a></span>
<span class=normal><a href=#__codelineno-21-106>106</a></span>
<span class=normal><a href=#__codelineno-21-107>107</a></span>
<span class=normal><a href=#__codelineno-21-108>108</a></span>
<span class=normal><a href=#__codelineno-21-109>109</a></span>
<span class=normal><a href=#__codelineno-21-110>110</a></span>
<span class=normal><a href=#__codelineno-21-111>111</a></span>
<span class=normal><a href=#__codelineno-21-112>112</a></span>
<span class=normal><a href=#__codelineno-21-113>113</a></span>
<span class=normal><a href=#__codelineno-21-114>114</a></span>
<span class=normal><a href=#__codelineno-21-115>115</a></span>
<span class=normal><a href=#__codelineno-21-116>116</a></span>
<span class=normal><a href=#__codelineno-21-117>117</a></span>
<span class=normal><a href=#__codelineno-21-118>118</a></span>
<span class=normal><a href=#__codelineno-21-119>119</a></span>
<span class=normal><a href=#__codelineno-21-120>120</a></span>
<span class=normal><a href=#__codelineno-21-121>121</a></span>
<span class=normal><a href=#__codelineno-21-122>122</a></span>
<span class=normal><a href=#__codelineno-21-123>123</a></span>
<span class=normal><a href=#__codelineno-21-124>124</a></span>
<span class=normal><a href=#__codelineno-21-125>125</a></span>
<span class=normal><a href=#__codelineno-21-126>126</a></span>
<span class=normal><a href=#__codelineno-21-127>127</a></span>
<span class=normal><a href=#__codelineno-21-128>128</a></span>
<span class=normal><a href=#__codelineno-21-129>129</a></span>
<span class=normal><a href=#__codelineno-21-130>130</a></span>
<span class=normal><a href=#__codelineno-21-131>131</a></span>
<span class=normal><a href=#__codelineno-21-132>132</a></span>
<span class=normal><a href=#__codelineno-21-133>133</a></span>
<span class=normal><a href=#__codelineno-21-134>134</a></span>
<span class=normal><a href=#__codelineno-21-135>135</a></span>
<span class=normal><a href=#__codelineno-21-136>136</a></span>
<span class=normal><a href=#__codelineno-21-137>137</a></span>
<span class=normal><a href=#__codelineno-21-138>138</a></span>
<span class=normal><a href=#__codelineno-21-139>139</a></span>
<span class=normal><a href=#__codelineno-21-140>140</a></span>
<span class=normal><a href=#__codelineno-21-141>141</a></span>
<span class=normal><a href=#__codelineno-21-142>142</a></span>
<span class=normal><a href=#__codelineno-21-143>143</a></span>
<span class=normal><a href=#__codelineno-21-144>144</a></span>
<span class=normal><a href=#__codelineno-21-145>145</a></span>
<span class=normal><a href=#__codelineno-21-146>146</a></span>
<span class=normal><a href=#__codelineno-21-147>147</a></span>
<span class=normal><a href=#__codelineno-21-148>148</a></span>
<span class=normal><a href=#__codelineno-21-149>149</a></span>
<span class=normal><a href=#__codelineno-21-150>150</a></span>
<span class=normal><a href=#__codelineno-21-151>151</a></span>
<span class=normal><a href=#__codelineno-21-152>152</a></span>
<span class=normal><a href=#__codelineno-21-153>153</a></span>
<span class=normal><a href=#__codelineno-21-154>154</a></span>
<span class=normal><a href=#__codelineno-21-155>155</a></span>
<span class=normal><a href=#__codelineno-21-156>156</a></span>
<span class=normal><a href=#__codelineno-21-157>157</a></span>
<span class=normal><a href=#__codelineno-21-158>158</a></span>
<span class=normal><a href=#__codelineno-21-159>159</a></span>
<span class=normal><a href=#__codelineno-21-160>160</a></span>
<span class=normal><a href=#__codelineno-21-161>161</a></span>
<span class=normal><a href=#__codelineno-21-162>162</a></span>
<span class=normal><a href=#__codelineno-21-163>163</a></span>
<span class=normal><a href=#__codelineno-21-164>164</a></span>
<span class=normal><a href=#__codelineno-21-165>165</a></span>
<span class=normal><a href=#__codelineno-21-166>166</a></span>
<span class=normal><a href=#__codelineno-21-167>167</a></span>
<span class=normal><a href=#__codelineno-21-168>168</a></span>
<span class=normal><a href=#__codelineno-21-169>169</a></span>
<span class=normal><a href=#__codelineno-21-170>170</a></span>
<span class=normal><a href=#__codelineno-21-171>171</a></span>
<span class=normal><a href=#__codelineno-21-172>172</a></span>
<span class=normal><a href=#__codelineno-21-173>173</a></span>
<span class=normal><a href=#__codelineno-21-174>174</a></span>
<span class=normal><a href=#__codelineno-21-175>175</a></span>
<span class=normal><a href=#__codelineno-21-176>176</a></span>
<span class=normal><a href=#__codelineno-21-177>177</a></span>
<span class=normal><a href=#__codelineno-21-178>178</a></span>
<span class=normal><a href=#__codelineno-21-179>179</a></span>
<span class=normal><a href=#__codelineno-21-180>180</a></span>
<span class=normal><a href=#__codelineno-21-181>181</a></span>
<span class=normal><a href=#__codelineno-21-182>182</a></span>
<span class=normal><a href=#__codelineno-21-183>183</a></span>
<span class=normal><a href=#__codelineno-21-184>184</a></span>
<span class=normal><a href=#__codelineno-21-185>185</a></span>
<span class=normal><a href=#__codelineno-21-186>186</a></span>
<span class=normal><a href=#__codelineno-21-187>187</a></span>
<span class=normal><a href=#__codelineno-21-188>188</a></span>
<span class=normal><a href=#__codelineno-21-189>189</a></span>
<span class=normal><a href=#__codelineno-21-190>190</a></span>
<span class=normal><a href=#__codelineno-21-191>191</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>cast</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2></a>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4></a><span class=kn>from</span><span class=w> </span><span class=nn>ocelescope</span><span class=w> </span><span class=kn>import</span> <span class=n>OCEL</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5></a>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6></a><span class=kn>from</span><span class=w> </span><span class=nn>.inputs.ocelGraph</span><span class=w> </span><span class=kn>import</span> <span class=n>EventRoot</span><span class=p>,</span> <span class=n>OCELGraphInput</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7></a><span class=kn>from</span><span class=w> </span><span class=nn>.resources.ocelGraph</span><span class=w> </span><span class=kn>import</span> <span class=n>E2ORelation</span><span class=p>,</span> <span class=n>EventNode</span><span class=p>,</span> <span class=n>O2ORelation</span><span class=p>,</span> <span class=n>ObjectNode</span><span class=p>,</span> <span class=n>OCELGraph</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8></a>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9></a><span class=c1># Generic function to count neighbours (events or objects)</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10></a>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11></a><span class=k>def</span><span class=w> </span><span class=nf>group_relation_entity</span><span class=p>(</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12></a>    <span class=n>df</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13></a>    <span class=n>entity_ids</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14></a>    <span class=n>id_column</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15></a>    <span class=n>type_column</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16></a>    <span class=n>target_id_column</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17></a><span class=p>):</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19></a><span class=sd>    Count how many &#39;target&#39; entities are linked to each entity (event or object).</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20></a>
</span><span id=__span-21-21><a id=__codelineno-21-21 name=__codelineno-21-21></a><span class=sd>    Returns:</span>
</span><span id=__span-21-22><a id=__codelineno-21-22 name=__codelineno-21-22></a><span class=sd>        DataFrame with columns: id, type, count</span>
</span><span id=__span-21-23><a id=__codelineno-21-23 name=__codelineno-21-23></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-21-24><a id=__codelineno-21-24 name=__codelineno-21-24></a>    <span class=k>return</span> <span class=p>(</span>
</span><span id=__span-21-25><a id=__codelineno-21-25 name=__codelineno-21-25></a>        <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=n>id_column</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>entity_ids</span><span class=p>)]</span>
</span><span id=__span-21-26><a id=__codelineno-21-26 name=__codelineno-21-26></a>        <span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=n>id_column</span><span class=p>,</span> <span class=n>type_column</span><span class=p>])[</span><span class=n>target_id_column</span><span class=p>]</span>
</span><span id=__span-21-27><a id=__codelineno-21-27 name=__codelineno-21-27></a>        <span class=o>.</span><span class=n>size</span><span class=p>()</span>
</span><span id=__span-21-28><a id=__codelineno-21-28 name=__codelineno-21-28></a>        <span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
</span><span id=__span-21-29><a id=__codelineno-21-29 name=__codelineno-21-29></a>        <span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=p>{</span><span class=n>id_column</span><span class=p>:</span> <span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=n>type_column</span><span class=p>:</span> <span class=s2>&quot;type&quot;</span><span class=p>,</span> <span class=n>target_id_column</span><span class=p>:</span> <span class=s2>&quot;count&quot;</span><span class=p>})</span>
</span><span id=__span-21-30><a id=__codelineno-21-30 name=__codelineno-21-30></a>    <span class=p>)</span>
</span><span id=__span-21-31><a id=__codelineno-21-31 name=__codelineno-21-31></a>
</span><span id=__span-21-32><a id=__codelineno-21-32 name=__codelineno-21-32></a>
</span><span id=__span-21-33><a id=__codelineno-21-33 name=__codelineno-21-33></a><span class=k>def</span><span class=w> </span><span class=nf>mine_ocel_graph</span><span class=p>(</span><span class=n>ocel</span><span class=p>:</span> <span class=n>OCEL</span><span class=p>,</span> <span class=nb>input</span><span class=p>:</span> <span class=n>OCELGraphInput</span><span class=p>):</span>
</span><span id=__span-21-34><a id=__codelineno-21-34 name=__codelineno-21-34></a>    <span class=n>graph</span> <span class=o>=</span> <span class=n>OCELGraph</span><span class=p>()</span>
</span><span id=__span-21-35><a id=__codelineno-21-35 name=__codelineno-21-35></a>
</span><span id=__span-21-36><a id=__codelineno-21-36 name=__codelineno-21-36></a>    <span class=n>events_to_visit</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-21-37><a id=__codelineno-21-37 name=__codelineno-21-37></a>    <span class=n>objects_to_visit</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-21-38><a id=__codelineno-21-38 name=__codelineno-21-38></a>
</span><span id=__span-21-39><a id=__codelineno-21-39 name=__codelineno-21-39></a>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=nb>input</span><span class=o>.</span><span class=n>root</span><span class=p>,</span> <span class=n>EventRoot</span><span class=p>):</span>
</span><span id=__span-21-40><a id=__codelineno-21-40 name=__codelineno-21-40></a>        <span class=n>root_id</span> <span class=o>=</span> <span class=nb>input</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>event_id</span>
</span><span id=__span-21-41><a id=__codelineno-21-41 name=__codelineno-21-41></a>        <span class=n>root</span> <span class=o>=</span> <span class=n>ocel</span><span class=o>.</span><span class=n>events</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>events</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>event_id_column</span><span class=p>]</span> <span class=o>==</span> <span class=nb>input</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>event_id</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span><span id=__span-21-42><a id=__codelineno-21-42 name=__codelineno-21-42></a>        <span class=n>events_to_visit</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>EventNode</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=nb>input</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>event_id</span><span class=p>,</span> <span class=n>activity_type</span><span class=o>=</span><span class=n>root</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>event_activity</span><span class=p>]))</span>
</span><span id=__span-21-43><a id=__codelineno-21-43 name=__codelineno-21-43></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-21-44><a id=__codelineno-21-44 name=__codelineno-21-44></a>        <span class=n>root_id</span> <span class=o>=</span> <span class=nb>input</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>object_id</span>
</span><span id=__span-21-45><a id=__codelineno-21-45 name=__codelineno-21-45></a>        <span class=n>root</span> <span class=o>=</span> <span class=n>ocel</span><span class=o>.</span><span class=n>objects</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>objects</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>object_id_column</span><span class=p>]</span> <span class=o>==</span> <span class=nb>input</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>object_id</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span><span id=__span-21-46><a id=__codelineno-21-46 name=__codelineno-21-46></a>        <span class=n>objects_to_visit</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>ObjectNode</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=nb>input</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>object_id</span><span class=p>,</span> <span class=n>object_type</span><span class=o>=</span><span class=n>root</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>object_type_column</span><span class=p>]))</span>
</span><span id=__span-21-47><a id=__codelineno-21-47 name=__codelineno-21-47></a>
</span><span id=__span-21-48><a id=__codelineno-21-48 name=__codelineno-21-48></a>    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>input</span><span class=o>.</span><span class=n>depth</span><span class=p>):</span>
</span><span id=__span-21-49><a id=__codelineno-21-49 name=__codelineno-21-49></a>        <span class=c1># Get current frontier IDs</span>
</span><span id=__span-21-50><a id=__codelineno-21-50 name=__codelineno-21-50></a>        <span class=n>event_ids_to_visit</span> <span class=o>=</span> <span class=p>[</span><span class=n>event</span><span class=o>.</span><span class=n>id</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>events_to_visit</span><span class=p>]</span>
</span><span id=__span-21-51><a id=__codelineno-21-51 name=__codelineno-21-51></a>        <span class=n>object_ids_to_visit</span> <span class=o>=</span> <span class=p>[</span><span class=n>obj</span><span class=o>.</span><span class=n>id</span> <span class=k>for</span> <span class=n>obj</span> <span class=ow>in</span> <span class=n>objects_to_visit</span><span class=p>]</span>
</span><span id=__span-21-52><a id=__codelineno-21-52 name=__codelineno-21-52></a>
</span><span id=__span-21-53><a id=__codelineno-21-53 name=__codelineno-21-53></a>        <span class=c1># Get event-object relations using XOR and not already in the graph</span>
</span><span id=__span-21-54><a id=__codelineno-21-54 name=__codelineno-21-54></a>        <span class=n>relations</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span> <span class=o>=</span> <span class=n>cast</span><span class=p>(</span>
</span><span id=__span-21-55><a id=__codelineno-21-55 name=__codelineno-21-55></a>            <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span>
</span><span id=__span-21-56><a id=__codelineno-21-56 name=__codelineno-21-56></a>            <span class=n>ocel</span><span class=o>.</span><span class=n>relations</span><span class=p>[</span>
</span><span id=__span-21-57><a id=__codelineno-21-57 name=__codelineno-21-57></a>                <span class=p>(</span>
</span><span id=__span-21-58><a id=__codelineno-21-58 name=__codelineno-21-58></a>                    <span class=p>(</span><span class=n>ocel</span><span class=o>.</span><span class=n>relations</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>event_id_column</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>event_ids_to_visit</span><span class=p>))</span>
</span><span id=__span-21-59><a id=__codelineno-21-59 name=__codelineno-21-59></a>                    <span class=o>^</span> <span class=p>(</span><span class=n>ocel</span><span class=o>.</span><span class=n>relations</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>object_id_column</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>object_ids_to_visit</span><span class=p>))</span>
</span><span id=__span-21-60><a id=__codelineno-21-60 name=__codelineno-21-60></a>                <span class=p>)</span>
</span><span id=__span-21-61><a id=__codelineno-21-61 name=__codelineno-21-61></a>                <span class=o>&amp;</span> <span class=o>~</span><span class=p>(</span><span class=n>ocel</span><span class=o>.</span><span class=n>relations</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>event_id_column</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>graph</span><span class=o>.</span><span class=n>event_ids</span><span class=p>))</span>
</span><span id=__span-21-62><a id=__codelineno-21-62 name=__codelineno-21-62></a>                <span class=o>&amp;</span> <span class=o>~</span><span class=p>(</span><span class=n>ocel</span><span class=o>.</span><span class=n>relations</span><span class=p>[</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>object_id_column</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>graph</span><span class=o>.</span><span class=n>object_ids</span><span class=p>))</span>
</span><span id=__span-21-63><a id=__codelineno-21-63 name=__codelineno-21-63></a>            <span class=p>],</span>
</span><span id=__span-21-64><a id=__codelineno-21-64 name=__codelineno-21-64></a>        <span class=p>)</span>
</span><span id=__span-21-65><a id=__codelineno-21-65 name=__codelineno-21-65></a>
</span><span id=__span-21-66><a id=__codelineno-21-66 name=__codelineno-21-66></a>        <span class=c1># Count object neighbors per event</span>
</span><span id=__span-21-67><a id=__codelineno-21-67 name=__codelineno-21-67></a>        <span class=n>events</span> <span class=o>=</span> <span class=n>group_relation_entity</span><span class=p>(</span>
</span><span id=__span-21-68><a id=__codelineno-21-68 name=__codelineno-21-68></a>            <span class=n>df</span><span class=o>=</span><span class=n>relations</span><span class=p>,</span>
</span><span id=__span-21-69><a id=__codelineno-21-69 name=__codelineno-21-69></a>            <span class=n>entity_ids</span><span class=o>=</span><span class=n>event_ids_to_visit</span><span class=p>,</span>
</span><span id=__span-21-70><a id=__codelineno-21-70 name=__codelineno-21-70></a>            <span class=n>id_column</span><span class=o>=</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>event_id_column</span><span class=p>,</span>
</span><span id=__span-21-71><a id=__codelineno-21-71 name=__codelineno-21-71></a>            <span class=n>type_column</span><span class=o>=</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>event_activity</span><span class=p>,</span>
</span><span id=__span-21-72><a id=__codelineno-21-72 name=__codelineno-21-72></a>            <span class=n>target_id_column</span><span class=o>=</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>object_id_column</span><span class=p>,</span>
</span><span id=__span-21-73><a id=__codelineno-21-73 name=__codelineno-21-73></a>        <span class=p>)</span>
</span><span id=__span-21-74><a id=__codelineno-21-74 name=__codelineno-21-74></a>
</span><span id=__span-21-75><a id=__codelineno-21-75 name=__codelineno-21-75></a>        <span class=c1># Count event neighbors per object</span>
</span><span id=__span-21-76><a id=__codelineno-21-76 name=__codelineno-21-76></a>        <span class=n>e2o_objects</span> <span class=o>=</span> <span class=n>group_relation_entity</span><span class=p>(</span>
</span><span id=__span-21-77><a id=__codelineno-21-77 name=__codelineno-21-77></a>            <span class=n>df</span><span class=o>=</span><span class=n>relations</span><span class=p>,</span>
</span><span id=__span-21-78><a id=__codelineno-21-78 name=__codelineno-21-78></a>            <span class=n>entity_ids</span><span class=o>=</span><span class=n>object_ids_to_visit</span><span class=p>,</span>
</span><span id=__span-21-79><a id=__codelineno-21-79 name=__codelineno-21-79></a>            <span class=n>id_column</span><span class=o>=</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>object_id_column</span><span class=p>,</span>
</span><span id=__span-21-80><a id=__codelineno-21-80 name=__codelineno-21-80></a>            <span class=n>type_column</span><span class=o>=</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>object_type_column</span><span class=p>,</span>
</span><span id=__span-21-81><a id=__codelineno-21-81 name=__codelineno-21-81></a>            <span class=n>target_id_column</span><span class=o>=</span><span class=n>ocel</span><span class=o>.</span><span class=n>ocel</span><span class=o>.</span><span class=n>event_id_column</span><span class=p>,</span>
</span><span id=__span-21-82><a id=__codelineno-21-82 name=__codelineno-21-82></a>        <span class=p>)</span>
</span><span id=__span-21-83><a id=__codelineno-21-83 name=__codelineno-21-83></a>
</span><span id=__span-21-84><a id=__codelineno-21-84 name=__codelineno-21-84></a>        <span class=c1># Get object-object (o2o) relations using XOR</span>
</span><span id=__span-21-85><a id=__codelineno-21-85 name=__codelineno-21-85></a>        <span class=n>o2o</span> <span class=o>=</span> <span class=n>cast</span><span class=p>(</span>
</span><span id=__span-21-86><a id=__codelineno-21-86 name=__codelineno-21-86></a>            <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span>
</span><span id=__span-21-87><a id=__codelineno-21-87 name=__codelineno-21-87></a>            <span class=n>ocel</span><span class=o>.</span><span class=n>o2o</span><span class=p>[</span>
</span><span id=__span-21-88><a id=__codelineno-21-88 name=__codelineno-21-88></a>                <span class=p>(</span>
</span><span id=__span-21-89><a id=__codelineno-21-89 name=__codelineno-21-89></a>                    <span class=p>(</span><span class=n>ocel</span><span class=o>.</span><span class=n>o2o</span><span class=p>[</span><span class=s2>&quot;ocel:oid_1&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>object_ids_to_visit</span><span class=p>))</span>
</span><span id=__span-21-90><a id=__codelineno-21-90 name=__codelineno-21-90></a>                    <span class=o>^</span> <span class=p>(</span><span class=n>ocel</span><span class=o>.</span><span class=n>o2o</span><span class=p>[</span><span class=s2>&quot;ocel:oid_2&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>object_ids_to_visit</span><span class=p>))</span>
</span><span id=__span-21-91><a id=__codelineno-21-91 name=__codelineno-21-91></a>                <span class=p>)</span>
</span><span id=__span-21-92><a id=__codelineno-21-92 name=__codelineno-21-92></a>                <span class=o>&amp;</span> <span class=o>~</span><span class=p>(</span><span class=n>ocel</span><span class=o>.</span><span class=n>o2o</span><span class=p>[</span><span class=s2>&quot;ocel:oid_1&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>graph</span><span class=o>.</span><span class=n>object_ids</span><span class=p>))</span>
</span><span id=__span-21-93><a id=__codelineno-21-93 name=__codelineno-21-93></a>                <span class=o>&amp;</span> <span class=o>~</span><span class=p>(</span><span class=n>ocel</span><span class=o>.</span><span class=n>o2o</span><span class=p>[</span><span class=s2>&quot;ocel:oid_2&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>graph</span><span class=o>.</span><span class=n>object_ids</span><span class=p>))</span>
</span><span id=__span-21-94><a id=__codelineno-21-94 name=__codelineno-21-94></a>            <span class=p>],</span>
</span><span id=__span-21-95><a id=__codelineno-21-95 name=__codelineno-21-95></a>        <span class=p>)</span>
</span><span id=__span-21-96><a id=__codelineno-21-96 name=__codelineno-21-96></a>
</span><span id=__span-21-97><a id=__codelineno-21-97 name=__codelineno-21-97></a>        <span class=c1># Normalize and mirror o2o (treat as undirected)</span>
</span><span id=__span-21-98><a id=__codelineno-21-98 name=__codelineno-21-98></a>        <span class=n>o2o</span> <span class=o>=</span> <span class=n>o2o</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span>
</span><span id=__span-21-99><a id=__codelineno-21-99 name=__codelineno-21-99></a>            <span class=n>columns</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;ocel:oid_1&quot;</span><span class=p>:</span> <span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;ocel:type_1&quot;</span><span class=p>:</span> <span class=s2>&quot;type&quot;</span><span class=p>,</span> <span class=s2>&quot;ocel:oid_2&quot;</span><span class=p>:</span> <span class=s2>&quot;target_id&quot;</span><span class=p>,</span> <span class=s2>&quot;ocel:type_2&quot;</span><span class=p>:</span> <span class=s2>&quot;target_type&quot;</span><span class=p>}</span>
</span><span id=__span-21-100><a id=__codelineno-21-100 name=__codelineno-21-100></a>        <span class=p>)</span>
</span><span id=__span-21-101><a id=__codelineno-21-101 name=__codelineno-21-101></a>
</span><span id=__span-21-102><a id=__codelineno-21-102 name=__codelineno-21-102></a>        <span class=n>mirrored</span> <span class=o>=</span> <span class=n>o2o</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span>
</span><span id=__span-21-103><a id=__codelineno-21-103 name=__codelineno-21-103></a>            <span class=n>columns</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;target_id&quot;</span><span class=p>:</span> <span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;target_type&quot;</span><span class=p>:</span> <span class=s2>&quot;type&quot;</span><span class=p>,</span> <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;target_id&quot;</span><span class=p>,</span> <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;target_type&quot;</span><span class=p>}</span>
</span><span id=__span-21-104><a id=__codelineno-21-104 name=__codelineno-21-104></a>        <span class=p>)</span>
</span><span id=__span-21-105><a id=__codelineno-21-105 name=__codelineno-21-105></a>
</span><span id=__span-21-106><a id=__codelineno-21-106 name=__codelineno-21-106></a>        <span class=n>mirrored_o2o</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>concat</span><span class=p>([</span><span class=n>o2o</span><span class=p>,</span> <span class=n>mirrored</span><span class=p>],</span> <span class=n>ignore_index</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;ocel:qualifier&quot;</span><span class=p>:</span> <span class=s2>&quot;qualifier&quot;</span><span class=p>})</span>
</span><span id=__span-21-107><a id=__codelineno-21-107 name=__codelineno-21-107></a>
</span><span id=__span-21-108><a id=__codelineno-21-108 name=__codelineno-21-108></a>        <span class=c1># Count o2o neighbours for each object</span>
</span><span id=__span-21-109><a id=__codelineno-21-109 name=__codelineno-21-109></a>        <span class=n>o2o_objects</span> <span class=o>=</span> <span class=n>group_relation_entity</span><span class=p>(</span>
</span><span id=__span-21-110><a id=__codelineno-21-110 name=__codelineno-21-110></a>            <span class=n>df</span><span class=o>=</span><span class=n>mirrored_o2o</span><span class=p>,</span>
</span><span id=__span-21-111><a id=__codelineno-21-111 name=__codelineno-21-111></a>            <span class=n>entity_ids</span><span class=o>=</span><span class=n>object_ids_to_visit</span><span class=p>,</span>
</span><span id=__span-21-112><a id=__codelineno-21-112 name=__codelineno-21-112></a>            <span class=n>id_column</span><span class=o>=</span><span class=s2>&quot;id&quot;</span><span class=p>,</span>
</span><span id=__span-21-113><a id=__codelineno-21-113 name=__codelineno-21-113></a>            <span class=n>type_column</span><span class=o>=</span><span class=s2>&quot;type&quot;</span><span class=p>,</span>
</span><span id=__span-21-114><a id=__codelineno-21-114 name=__codelineno-21-114></a>            <span class=n>target_id_column</span><span class=o>=</span><span class=s2>&quot;target_id&quot;</span><span class=p>,</span>
</span><span id=__span-21-115><a id=__codelineno-21-115 name=__codelineno-21-115></a>        <span class=p>)</span>
</span><span id=__span-21-116><a id=__codelineno-21-116 name=__codelineno-21-116></a>
</span><span id=__span-21-117><a id=__codelineno-21-117 name=__codelineno-21-117></a>        <span class=c1># Combine object neighbour counts</span>
</span><span id=__span-21-118><a id=__codelineno-21-118 name=__codelineno-21-118></a>        <span class=n>objects</span> <span class=o>=</span> <span class=p>(</span>
</span><span id=__span-21-119><a id=__codelineno-21-119 name=__codelineno-21-119></a>            <span class=n>pd</span><span class=o>.</span><span class=n>concat</span><span class=p>([</span><span class=n>o2o_objects</span><span class=p>,</span> <span class=n>e2o_objects</span><span class=p>],</span> <span class=n>ignore_index</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-21-120><a id=__codelineno-21-120 name=__codelineno-21-120></a>            <span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;type&quot;</span><span class=p>],</span> <span class=n>as_index</span><span class=o>=</span><span class=kc>False</span><span class=p>)[</span><span class=s2>&quot;count&quot;</span><span class=p>]</span>
</span><span id=__span-21-121><a id=__codelineno-21-121 name=__codelineno-21-121></a>            <span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span><span id=__span-21-122><a id=__codelineno-21-122 name=__codelineno-21-122></a>        <span class=p>)</span>
</span><span id=__span-21-123><a id=__codelineno-21-123 name=__codelineno-21-123></a>
</span><span id=__span-21-124><a id=__codelineno-21-124 name=__codelineno-21-124></a>        <span class=c1># Update graph with this layer</span>
</span><span id=__span-21-125><a id=__codelineno-21-125 name=__codelineno-21-125></a>        <span class=n>graph</span><span class=o>.</span><span class=n>objects</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=n>objects</span> <span class=o>+</span> <span class=n>objects_to_visit</span>
</span><span id=__span-21-126><a id=__codelineno-21-126 name=__codelineno-21-126></a>        <span class=n>graph</span><span class=o>.</span><span class=n>events</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=n>events</span> <span class=o>+</span> <span class=n>events_to_visit</span>
</span><span id=__span-21-127><a id=__codelineno-21-127 name=__codelineno-21-127></a>
</span><span id=__span-21-128><a id=__codelineno-21-128 name=__codelineno-21-128></a>        <span class=c1># Prepare for next layer</span>
</span><span id=__span-21-129><a id=__codelineno-21-129 name=__codelineno-21-129></a>        <span class=n>events_to_visit</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-21-130><a id=__codelineno-21-130 name=__codelineno-21-130></a>        <span class=n>objects_to_visit</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-21-131><a id=__codelineno-21-131 name=__codelineno-21-131></a>
</span><span id=__span-21-132><a id=__codelineno-21-132 name=__codelineno-21-132></a>        <span class=n>object_id_with_neighbours</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-21-133><a id=__codelineno-21-133 name=__codelineno-21-133></a>            <span class=n>row</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>objects</span><span class=o>.</span><span class=n>iterrows</span><span class=p>()</span> <span class=k>if</span> <span class=n>row</span><span class=p>[</span><span class=s2>&quot;count&quot;</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=nb>input</span><span class=o>.</span><span class=n>max_neighbours</span> <span class=ow>or</span> <span class=n>row</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=n>root_id</span>
</span><span id=__span-21-134><a id=__codelineno-21-134 name=__codelineno-21-134></a>        <span class=p>]</span>
</span><span id=__span-21-135><a id=__codelineno-21-135 name=__codelineno-21-135></a>        <span class=n>event_id_with_neighbours</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-21-136><a id=__codelineno-21-136 name=__codelineno-21-136></a>            <span class=n>row</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>events</span><span class=o>.</span><span class=n>iterrows</span><span class=p>()</span> <span class=k>if</span> <span class=n>row</span><span class=p>[</span><span class=s2>&quot;count&quot;</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=nb>input</span><span class=o>.</span><span class=n>max_neighbours</span> <span class=ow>or</span> <span class=n>row</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=n>root_id</span>
</span><span id=__span-21-137><a id=__codelineno-21-137 name=__codelineno-21-137></a>        <span class=p>]</span>
</span><span id=__span-21-138><a id=__codelineno-21-138 name=__codelineno-21-138></a>
</span><span id=__span-21-139><a id=__codelineno-21-139 name=__codelineno-21-139></a>        <span class=c1># Add o2o relations to graph and queue new objects</span>
</span><span id=__span-21-140><a id=__codelineno-21-140 name=__codelineno-21-140></a>        <span class=k>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>row</span> <span class=ow>in</span> <span class=p>(</span>
</span><span id=__span-21-141><a id=__codelineno-21-141 name=__codelineno-21-141></a>            <span class=n>cast</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>mirrored_o2o</span><span class=p>[</span><span class=n>mirrored_o2o</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>object_id_with_neighbours</span><span class=p>)])</span>
</span><span id=__span-21-142><a id=__codelineno-21-142 name=__codelineno-21-142></a>            <span class=o>.</span><span class=n>drop_duplicates</span><span class=p>(</span><span class=n>subset</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;target_id&quot;</span><span class=p>],</span> <span class=n>keep</span><span class=o>=</span><span class=s2>&quot;first&quot;</span><span class=p>)</span>
</span><span id=__span-21-143><a id=__codelineno-21-143 name=__codelineno-21-143></a>            <span class=o>.</span><span class=n>iterrows</span><span class=p>()</span>
</span><span id=__span-21-144><a id=__codelineno-21-144 name=__codelineno-21-144></a>        <span class=p>):</span>
</span><span id=__span-21-145><a id=__codelineno-21-145 name=__codelineno-21-145></a>            <span class=n>graph</span><span class=o>.</span><span class=n>o2o_relations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span><span id=__span-21-146><a id=__codelineno-21-146 name=__codelineno-21-146></a>                <span class=n>O2ORelation</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]),</span> <span class=n>target</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;target_id&quot;</span><span class=p>]),</span> <span class=n>qualifier</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;qualifier&quot;</span><span class=p>]))</span>
</span><span id=__span-21-147><a id=__codelineno-21-147 name=__codelineno-21-147></a>            <span class=p>)</span>
</span><span id=__span-21-148><a id=__codelineno-21-148 name=__codelineno-21-148></a>            <span class=n>objects_to_visit</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>ObjectNode</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;target_id&quot;</span><span class=p>]),</span> <span class=n>object_type</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;target_type&quot;</span><span class=p>])))</span>
</span><span id=__span-21-149><a id=__codelineno-21-149 name=__codelineno-21-149></a>
</span><span id=__span-21-150><a id=__codelineno-21-150 name=__codelineno-21-150></a>        <span class=c1># Add e2o relations (object → event)</span>
</span><span id=__span-21-151><a id=__codelineno-21-151 name=__codelineno-21-151></a>        <span class=k>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>row</span> <span class=ow>in</span> <span class=p>(</span>
</span><span id=__span-21-152><a id=__codelineno-21-152 name=__codelineno-21-152></a>            <span class=n>cast</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>relations</span><span class=p>[</span><span class=n>relations</span><span class=p>[</span><span class=s2>&quot;ocel:oid&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>object_id_with_neighbours</span><span class=p>)])</span>
</span><span id=__span-21-153><a id=__codelineno-21-153 name=__codelineno-21-153></a>            <span class=o>.</span><span class=n>drop_duplicates</span><span class=p>(</span><span class=n>subset</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;ocel:eid&quot;</span><span class=p>],</span> <span class=n>keep</span><span class=o>=</span><span class=s2>&quot;first&quot;</span><span class=p>)</span>
</span><span id=__span-21-154><a id=__codelineno-21-154 name=__codelineno-21-154></a>            <span class=o>.</span><span class=n>iterrows</span><span class=p>()</span>
</span><span id=__span-21-155><a id=__codelineno-21-155 name=__codelineno-21-155></a>        <span class=p>):</span>
</span><span id=__span-21-156><a id=__codelineno-21-156 name=__codelineno-21-156></a>            <span class=n>graph</span><span class=o>.</span><span class=n>e2o_relations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span><span id=__span-21-157><a id=__codelineno-21-157 name=__codelineno-21-157></a>                <span class=n>E2ORelation</span><span class=p>(</span>
</span><span id=__span-21-158><a id=__codelineno-21-158 name=__codelineno-21-158></a>                    <span class=n>event_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:eid&quot;</span><span class=p>]),</span>
</span><span id=__span-21-159><a id=__codelineno-21-159 name=__codelineno-21-159></a>                    <span class=n>object_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:oid&quot;</span><span class=p>]),</span>
</span><span id=__span-21-160><a id=__codelineno-21-160 name=__codelineno-21-160></a>                    <span class=n>qualifier</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:qualifier&quot;</span><span class=p>]),</span>
</span><span id=__span-21-161><a id=__codelineno-21-161 name=__codelineno-21-161></a>                    <span class=n>object_type</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:type&quot;</span><span class=p>]),</span>
</span><span id=__span-21-162><a id=__codelineno-21-162 name=__codelineno-21-162></a>                <span class=p>)</span>
</span><span id=__span-21-163><a id=__codelineno-21-163 name=__codelineno-21-163></a>            <span class=p>)</span>
</span><span id=__span-21-164><a id=__codelineno-21-164 name=__codelineno-21-164></a>            <span class=n>events_to_visit</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>EventNode</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:eid&quot;</span><span class=p>]),</span> <span class=n>activity_type</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:activity&quot;</span><span class=p>])))</span>
</span><span id=__span-21-165><a id=__codelineno-21-165 name=__codelineno-21-165></a>
</span><span id=__span-21-166><a id=__codelineno-21-166 name=__codelineno-21-166></a>        <span class=c1># Add e2o relations (event → object)</span>
</span><span id=__span-21-167><a id=__codelineno-21-167 name=__codelineno-21-167></a>        <span class=k>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>row</span> <span class=ow>in</span> <span class=p>(</span>
</span><span id=__span-21-168><a id=__codelineno-21-168 name=__codelineno-21-168></a>            <span class=n>cast</span><span class=p>(</span>
</span><span id=__span-21-169><a id=__codelineno-21-169 name=__codelineno-21-169></a>                <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span>
</span><span id=__span-21-170><a id=__codelineno-21-170 name=__codelineno-21-170></a>                <span class=n>relations</span><span class=p>[</span>
</span><span id=__span-21-171><a id=__codelineno-21-171 name=__codelineno-21-171></a>                    <span class=n>relations</span><span class=p>[</span><span class=s2>&quot;ocel:eid&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>event_id_with_neighbours</span><span class=p>)</span>
</span><span id=__span-21-172><a id=__codelineno-21-172 name=__codelineno-21-172></a>                    <span class=o>&amp;</span> <span class=o>~</span><span class=n>relations</span><span class=p>[</span><span class=s2>&quot;ocel:oid&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>([</span><span class=n>obj</span><span class=o>.</span><span class=n>id</span> <span class=k>for</span> <span class=n>obj</span> <span class=ow>in</span> <span class=n>objects_to_visit</span><span class=p>])</span>
</span><span id=__span-21-173><a id=__codelineno-21-173 name=__codelineno-21-173></a>                <span class=p>],</span>
</span><span id=__span-21-174><a id=__codelineno-21-174 name=__codelineno-21-174></a>            <span class=p>)</span>
</span><span id=__span-21-175><a id=__codelineno-21-175 name=__codelineno-21-175></a>            <span class=o>.</span><span class=n>drop_duplicates</span><span class=p>(</span><span class=n>subset</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;ocel:oid&quot;</span><span class=p>],</span> <span class=n>keep</span><span class=o>=</span><span class=s2>&quot;first&quot;</span><span class=p>)</span>
</span><span id=__span-21-176><a id=__codelineno-21-176 name=__codelineno-21-176></a>            <span class=o>.</span><span class=n>iterrows</span><span class=p>()</span>
</span><span id=__span-21-177><a id=__codelineno-21-177 name=__codelineno-21-177></a>        <span class=p>):</span>
</span><span id=__span-21-178><a id=__codelineno-21-178 name=__codelineno-21-178></a>            <span class=n>graph</span><span class=o>.</span><span class=n>e2o_relations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span><span id=__span-21-179><a id=__codelineno-21-179 name=__codelineno-21-179></a>                <span class=n>E2ORelation</span><span class=p>(</span>
</span><span id=__span-21-180><a id=__codelineno-21-180 name=__codelineno-21-180></a>                    <span class=n>event_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:eid&quot;</span><span class=p>]),</span>
</span><span id=__span-21-181><a id=__codelineno-21-181 name=__codelineno-21-181></a>                    <span class=n>object_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:oid&quot;</span><span class=p>]),</span>
</span><span id=__span-21-182><a id=__codelineno-21-182 name=__codelineno-21-182></a>                    <span class=n>qualifier</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:qualifier&quot;</span><span class=p>]),</span>
</span><span id=__span-21-183><a id=__codelineno-21-183 name=__codelineno-21-183></a>                    <span class=n>object_type</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:type&quot;</span><span class=p>]),</span>
</span><span id=__span-21-184><a id=__codelineno-21-184 name=__codelineno-21-184></a>                <span class=p>)</span>
</span><span id=__span-21-185><a id=__codelineno-21-185 name=__codelineno-21-185></a>            <span class=p>)</span>
</span><span id=__span-21-186><a id=__codelineno-21-186 name=__codelineno-21-186></a>            <span class=n>objects_to_visit</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>ObjectNode</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:oid&quot;</span><span class=p>]),</span> <span class=n>object_type</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s2>&quot;ocel:type&quot;</span><span class=p>])))</span>
</span><span id=__span-21-187><a id=__codelineno-21-187 name=__codelineno-21-187></a>
</span><span id=__span-21-188><a id=__codelineno-21-188 name=__codelineno-21-188></a>    <span class=n>graph</span><span class=o>.</span><span class=n>objects</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=n>objects</span> <span class=o>+</span> <span class=n>objects_to_visit</span>
</span><span id=__span-21-189><a id=__codelineno-21-189 name=__codelineno-21-189></a>    <span class=n>graph</span><span class=o>.</span><span class=n>events</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=n>events</span> <span class=o>+</span> <span class=n>events_to_visit</span>
</span><span id=__span-21-190><a id=__codelineno-21-190 name=__codelineno-21-190></a>
</span><span id=__span-21-191><a id=__codelineno-21-191 name=__codelineno-21-191></a>    <span class=k>return</span> <span class=n>graph</span>
</span></code></pre></div></td></tr></table></div> </details> <p>In your plugin class, simply import and call this function:</p> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-22-1>1</a></span>
<span class=normal><a href=#__codelineno-22-2>2</a></span>
<span class=normal><a href=#__codelineno-22-3>3</a></span>
<span class=normal><a href=#__codelineno-22-4>4</a></span>
<span class=normal><a href=#__codelineno-22-5>5</a></span>
<span class=normal><a href=#__codelineno-22-6>6</a></span>
<span class=normal><a href=#__codelineno-22-7>7</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1></a><span class=kn>from</span><span class=w> </span><span class=nn>.util</span><span class=w> </span><span class=kn>import</span> <span class=n>mine_ocel_graph</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2></a>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3></a><span class=k>class</span><span class=w> </span><span class=nc>OcelGraphDiscovery</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4></a>    <span class=o>...</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5></a>    <span class=nd>@plugin_method</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s2>&quot;Mine OCEL Graph&quot;</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Mines a OCEL Graph&quot;</span><span class=p>)</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6></a>    <span class=k>def</span><span class=w> </span><span class=nf>mine_ocel_graph</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>ocel</span><span class=p>:</span> <span class=n>OCEL</span><span class=p>,</span> <span class=nb>input</span><span class=p>:</span> <span class=n>OCELGraphInput</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OCELGraph</span><span class=p>:</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7></a>        <span class=k>return</span> <span class=n>mine_ocel_graph</span><span class=p>(</span><span class=n>ocel</span><span class=p>,</span> <span class=nb>input</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Currently, <strong>Ocelescope plugins only support relative imports</strong>.<br> This means you must ensure all imports inside your plugin use relative paths.</p> <div class="language-text highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-23-1>1</a></span>
<span class=normal><a href=#__codelineno-23-2>2</a></span>
<span class=normal><a href=#__codelineno-23-3>3</a></span>
<span class=normal><a href=#__codelineno-23-4>4</a></span>
<span class=normal><a href=#__codelineno-23-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1></a># ✅ Correct (relative import)
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2></a>from .util import some_function
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3></a>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4></a># ❌ Incorrect (absolute import)
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5></a>from ocel_graph.util import some_function
</span></code></pre></div></td></tr></table></div> </div> <h2 id=step-3-build-plugin>Step 3: Build Plugin<a class=headerlink href=#step-3-build-plugin title="Permanent link">&para;</a></h2> <p>Before your plugin can be built, make sure that the top-level <code>__init__.py</code> properly exposes your plugin class:</p> <div class="language-python highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>__init__.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-24-1>1</a></span>
<span class=normal><a href=#__codelineno-24-2>2</a></span>
<span class=normal><a href=#__codelineno-24-3>3</a></span>
<span class=normal><a href=#__codelineno-24-4>4</a></span>
<span class=normal><a href=#__codelineno-24-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1></a><span class=kn>from</span><span class=w> </span><span class=nn>.plugin</span><span class=w> </span><span class=kn>import</span> <span class=n>OcelGraphDiscovery</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2></a>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3></a><span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4></a>    <span class=s2>&quot;OcelGraphDiscovery&quot;</span><span class=p>,</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5></a><span class=p>]</span>
</span></code></pre></div></td></tr></table></div> <p>In ocelescope plugins are basically just the packages zipped so in our case:</p> <div class="language-text highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-25-1>1</a></span>
<span class=normal><a href=#__codelineno-25-2>2</a></span>
<span class=normal><a href=#__codelineno-25-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1></a>ocel_graph/
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2></a>  ├── __init__.py
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3></a>  └── plugin.py
</span></code></pre></div></td></tr></table></div> <p>You can create the zip manually, or use the provided build script from the Ocelescope template by running at the project root:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-26-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1></a>python<span class=w> </span>scripts/build_plugin.py
</span></code></pre></div></td></tr></table></div> <p>Or if you are using uv:</p> <div class="language-sh highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-27-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1></a>uv<span class=w> </span>run<span class=w> </span>python<span class=w> </span>scripts/build_plugin.py
</span></code></pre></div></td></tr></table></div> <p>The build script also checks for any absolute imports you may have missed and will raise an error if it finds them. After running the build, your plugin package will be created in the dist/ folder.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 6, 2026 12:47:04 UTC">February 6, 2026</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../extension/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Extensions"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Extensions </div> </div> </a> <a href=../../references/core/ class="md-footer__link md-footer__link--next" aria-label="Next: Core"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Core </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/rwth-pads target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.footer", "navigation.indexes", "toc.integrate", "content.code.copy", "content.code.annotate", "content.action.edit", "content.tabs.link", "header.autohide", "search.suggest", "search.highlight", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>